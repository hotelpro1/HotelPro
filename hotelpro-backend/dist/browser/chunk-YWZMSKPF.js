import{a as Le,b as xe,c as K}from"./chunk-JTCCQXIJ.js";import{a as C}from"./chunk-MSXCR3QF.js";import{c as ve,d as c,e as he,f as Fe,k as Ce,m as Ee,n as Se,p as Ae,q as Ne,r as be,s as Pe,w as De,x as Te,y as Ie,z as we}from"./chunk-JTMYAVLC.js";import{b as Ue}from"./chunk-AZK4NKSV.js";import{Ba as B,Ca as v,Da as F,Db as ye,Fb as ce,Ia as ne,Ib as ge,Ja as le,Jb as H,Ka as oe,L as Y,Lb as fe,Ma as o,Mb as _e,Na as pe,Oa as ae,R as Q,S as $,Xa as J,Z as X,Za as g,aa as ee,ea as p,fa as h,la as s,na as m,nb as me,ob as se,pb as de,sa as W,ta as te,ua as re,va as ie,wa as n,wb as ue,xa as t,ya as y}from"./chunk-IHM353DK.js";function Oe(r,a){if(r&1){let u=B();n(0,"button",6),v("click",function(){let i=Q(u).openFileSelector;return $(i())}),o(1," Select "),t()}}function Re(r,a){if(r&1){let u=B();n(0,"div",3),y(1,"img",7),n(2,"i",8),v("click",function(){let i=Q(u).$index,e=F();return $(e.removeFile(i))}),o(3," cancel "),t()()}if(r&2){let u=a.$implicit;p(),m("src",u,ee)}}function Ve(r,a){if(r&1&&(n(0,"div",4),o(1),t()),r&2){let u=F();p(),pe(u.fileError)}}function Me(r,a){if(r&1){let u=B();n(0,"button",9),v("click",function(){Q(u);let i=F();return $(i.uploadFiles())}),o(1,"Upload"),t()}}var qe=(()=>{let a=class a{constructor(){this.multiple=!0,this.acceptTypes=".jpg, .jpeg, .png, .JPG, .JPEG, .PNG",this.maxFileSize=2e6,this.onUpload=new X,this.fileError="",this.filePreviews=[],this.files=[]}droppedFiles(l){if(this.clearErrors(),!this.multiple&&l.length>1){this.fileError="Only one file is allowed.";return}this.files=[],this.filePreviews=[];for(let i of l)i.fileEntry.isFile&&this.isFileAllowed(i.fileEntry.name)?i.fileEntry.file(d=>{this.isFileSizeAllowed(d.size)?(this.files.push(d),this.generatePreview(d)):this.fileError="Max size of a file allowed is 2 MB."}):this.fileError="Only files in '.jpg', '.jpeg', '.png' format are accepted."}isFileAllowed(l){let i=this.acceptTypes.split(",").map(d=>d.trim()),e=l.substring(l.lastIndexOf(".")).toLowerCase();return i.includes(e)}isFileSizeAllowed(l){return l<=this.maxFileSize}generatePreview(l){let i=new FileReader;i.onload=e=>{this.filePreviews.push(e.target.result)},i.readAsDataURL(l)}removeFile(l){this.filePreviews.splice(l,1),this.files.splice(l,1)}uploadFiles(){if(this.files.length===0){this.fileError="No files to upload.";return}this.onUpload.emit(this.files)}clearErrors(){this.fileError=""}clearFiles(){this.filePreviews=[],this.files=[]}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=Y({type:a,selectors:[["app-file-upload"]],inputs:{multiple:"multiple",acceptTypes:"acceptTypes",maxFileSize:"maxFileSize"},outputs:{onUpload:"onUpload"},standalone:!0,features:[J],decls:7,vars:4,consts:[["dropZoneClassName","my-style","contentClassName","my-style",3,"onFileDrop","accept","multiple"],["ngx-file-drop-content-tmp",""],[1,"d-flex"],[2,"position","relative"],[1,"error"],[1,"btn","btn-primary","mt-3"],["type","button",1,"btn","btn-primary",3,"click"],["alt","File Preview",2,"width","300px","height","200px",3,"src"],[1,"material-symbols-rounded","text-danger",2,"position","absolute","right","4px","background","white","cursor","pointer",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(i,e){i&1&&(n(0,"ngx-file-drop",0),v("onFileDrop",function(_){return e.droppedFiles(_)}),s(1,Oe,2,0,"ng-template",1),t(),n(2,"div",2),re(3,Re,4,1,"div",3,te),t(),s(5,Ve,2,1,"div",4)(6,Me,2,0,"button",5)),i&2&&(m("accept",e.acceptTypes)("multiple",e.multiple),p(3),ie(e.filePreviews),p(2),W(5,e.fileError?5:-1),p(),W(6,!e.fileError&&e.files.length>0?6:-1))},dependencies:[K,xe,Le]});let r=a;return r})();var f=r=>({"is-invalid":r});function ke(r,a){r&1&&(n(0,"small",28),o(1,"Property Unit Name is required"),t())}function je(r,a){r&1&&(n(0,"small",28),o(1,"Property Unit Legal Name is required"),t())}function Ge(r,a){if(r&1&&(n(0,"option",29),o(1),t()),r&2){let u=a.$implicit;m("value",u),p(),ae(" ",u," ")}}function Ze(r,a){r&1&&(n(0,"small",28),o(1,"Property Unit Type is required"),t())}function Qe(r,a){r&1&&(n(0,"small",28),o(1,"Description is required"),t())}function $e(r,a){r&1&&(n(0,"small",28),o(1,"Address Line 1 is required"),t())}function Be(r,a){r&1&&(n(0,"small",28),o(1,"City is required"),t())}function He(r,a){r&1&&(n(0,"small",28),o(1,"State is required"),t())}function Ye(r,a){r&1&&(n(0,"small",28),o(1,"Country is required"),t())}function Je(r,a){r&1&&(n(0,"small",28),o(1,"ZIP Code is required. "),y(2,"br"),t())}function Ke(r,a){r&1&&(n(0,"small",28),o(1,"ZIP Code must be 6-8 digits long"),t())}function We(r,a){if(r&1&&(n(0,"div"),s(1,Je,3,0,"small",5)(2,Ke,2,0,"small",5),t()),r&2){let u,l,i=F();p(),m("ngIf",(u=i.propertyUnitForm.get("propertyAddress.zipCode"))==null||u.errors==null?null:u.errors.required),p(),m("ngIf",(l=i.propertyUnitForm.get("propertyAddress.zipCode"))==null||l.errors==null?null:l.errors.zipCode)}}function Xe(r,a){r&1&&(n(0,"small",28),o(1,"First Name is required"),t())}function et(r,a){r&1&&(n(0,"small",28),o(1,"Last Name is required"),t())}function tt(r,a){r&1&&(n(0,"small",28),o(1,"Phone is required"),t())}function rt(r,a){r&1&&(n(0,"small",28),o(1,"Email is required"),t())}function it(r,a){if(r&1){let u=B();n(0,"button",30),v("click",function(){Q(u);let i=F();return $(i.navigateToRoomSetup())}),o(1,"Next"),t()}}var St=(()=>{let a=class a{constructor(l,i,e,d,_,U){this.authService=l,this.crudService=i,this.fb=e,this.alertService=d,this.router=_,this.activeRoute=U,this.PropertyTypes=["Villa","Hotel","Resort"],this.propertyUnitId="ADD"}ngOnInit(){this.userInfo=this.authService.getUserInfo()?.user,this.propertyUnitId=this.activeRoute.snapshot.paramMap.get("propertyUnitId"),this.propertyUnitForm=this.fb.group({propertyUnitName:["",[c.required,C.noLeadingSpace]],propertyUnitLegalName:["",[c.required]],propertyUnitType:["Hotel",[c.required]],description:[""],website:[""],propertyAddress:this.fb.group({addressLine1:["",[c.required]],addressLine2:[""],city:["",[c.required,C.noLeadingSpace]],state:["",[c.required,c.pattern(/^[A-Za-z\s]+$/),C.noLeadingSpace]],country:["",[c.required]],zipCode:["",[c.required,C.zipCodeValidator]]}),managerDetails:this.fb.group({firstName:["",[c.required,C.noLeadingSpace]],lastName:["",[c.required,C.noLeadingSpace]],phone:["",[c.required,c.minLength(10)]],email:["",[c.required,c.email]]})}),this.propertyUnitId!="ADD"&&this.crudService.post(H.READ_PROPERTY_UNIT+this.propertyUnitId,{}).then(l=>{console.log(l),this.propertyUnitForm.reset(l.data)}).catch(l=>{this.alertService.errorAlert(l.message)})}onSubmit(){if(this.propertyUnitForm.valid){console.log(this.propertyUnitForm.value);let l=this.propertyUnitForm.value;l.propertyId=this.userInfo.propertyId,this.propertyUnitId=="ADD"?this.crudService.post(H.CREATE_PROPERTY_UNIT,l).then(i=>{console.log(i),this.alertService.successAlert(i.message),this.propertyUnitId=i?.data?._id}).catch(i=>{this.alertService.errorAlert(i?.error?.message)}):this.crudService.post(H.UPDATE_PROPERTY_UNIT+this.propertyUnitId,l).then(i=>{console.log(i),this.alertService.successAlert(i.message)}).catch(i=>{this.alertService.errorAlert(i.message)})}else this.propertyUnitForm.markAllAsTouched()}navigateToRoomSetup(){this.router.navigate(["/rooms-review/"+this.propertyUnitId])}getfile(l){if(l.length>0){let i=new FormData;l.forEach(e=>i.append("file",e,e.name)),this.crudService.post(H.UPLOAD_ROOMS_PHOTOS,i,{skipLoader:!0}).then(e=>{this.fileUploadComponent.clearFiles(),this.alertService.successAlert(e.message)}).catch(e=>{this.alertService.errorAlert(e.message)})}}};a.\u0275fac=function(i){return new(i||a)(h(Ue),h(fe),h(Te),h(_e),h(ce),h(ye))},a.\u0275cmp=Y({type:a,selectors:[["app-add-update-property"]],viewQuery:function(i,e){if(i&1&&ne(qe,5),i&2){let d;le(d=oe())&&(e.fileUploadComponent=d.first)}},standalone:!0,features:[J],decls:84,vars:52,consts:[[1,"container","container_form","my-3","rounded"],[1,"row","row-cols-1","row-cols-md-2",3,"ngSubmit","formGroup"],[1,"col","mt-3"],[1,"form-label"],["type","text","formControlName","propertyUnitName","placeholder","Enter Property Unit Name",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","propertyUnitLegalName","placeholder","Enter Property Unit Legal Name",1,"form-control",3,"ngClass"],["id","options","formControlName","propertyUnitType",1,"form-control",2,"appearance","auto"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","description","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"col-md-12","mt-4"],[1,"form-label","fw-semibold"],["formGroupName","propertyAddress",1,"col","mt-3"],["type","text","formControlName","addressLine1","placeholder","Enter Address Line 1",1,"form-control",3,"ngClass"],["type","text","formControlName","addressLine2","placeholder","Enter Address Line 2",1,"form-control"],["type","text","formControlName","city","placeholder","Enter City",1,"form-control",3,"ngClass"],["type","text","formControlName","state","placeholder","Enter State",1,"form-control",3,"ngClass"],["type","text","formControlName","country","placeholder","Enter Country",1,"form-control",3,"ngClass"],["type","text","formControlName","zipCode","placeholder","Enter Zip Code",1,"form-control",3,"ngClass"],[4,"ngIf"],["formGroupName","managerDetails",1,"col","mt-3"],["type","text","formControlName","firstName","placeholder","Enter  First Name",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName","placeholder","Enter  Last Name",1,"form-control",3,"ngClass"],["type","text","formControlName","phone","placeholder","Enter  Phone","maxlength","10",1,"form-control",3,"ngClass"],["type","text","formControlName","email","placeholder","Enter  Email",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mb-3"],["type","button","class","btn btn-primary mb-3 ms-2",3,"click",4,"ngIf"],[1,"text-danger"],[3,"value"],["type","button",1,"btn","btn-primary","mb-3","ms-2",3,"click"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"form",1),v("ngSubmit",function(){return e.onSubmit()}),n(2,"div",2)(3,"label",3),o(4,"Property Unit Name"),t(),y(5,"input",4),s(6,ke,2,0,"small",5),t(),n(7,"div",2)(8,"label",3),o(9,"Property Unit Legal Name"),t(),y(10,"input",6),s(11,je,2,0,"small",5),t(),n(12,"div",2)(13,"label",3),o(14,"Property Unit Type"),t(),n(15,"div")(16,"select",7),s(17,Ge,2,2,"option",8),t()(),s(18,Ze,2,0,"small",5),t(),n(19,"div",2)(20,"label",3),o(21,"Description"),t(),y(22,"input",9),s(23,Qe,2,0,"small",5),t(),n(24,"div",10)(25,"label",11),o(26,"Property Address"),t()(),n(27,"div",12)(28,"label",3),o(29,"Address Line 1"),t(),y(30,"input",13),s(31,$e,2,0,"small",5),t(),n(32,"div",12)(33,"label",3),o(34,"Address Line 2"),t(),y(35,"input",14),t(),n(36,"div",12)(37,"label",3),o(38,"City"),t(),y(39,"input",15),s(40,Be,2,0,"small",5),t(),n(41,"div",12)(42,"label",3),o(43,"State"),t(),y(44,"input",16),s(45,He,2,0,"small",5),t(),n(46,"div",12)(47,"label",3),o(48,"Country"),t(),y(49,"input",17),s(50,Ye,2,0,"small",5),t(),n(51,"div",12)(52,"label",3),o(53,"Zip Code"),t(),y(54,"input",18),s(55,We,3,2,"div",19),t(),n(56,"div",10)(57,"label",11),o(58,"Manager Details"),t()(),n(59,"div",20)(60,"label",3),o(61," First Name"),t(),y(62,"input",21),s(63,Xe,2,0,"small",5),t(),n(64,"div",20)(65,"label",3),o(66," Last Name"),t(),y(67,"input",22),s(68,et,2,0,"small",5),t(),n(69,"div",20)(70,"label",3),o(71," Phone"),t(),y(72,"input",23),s(73,tt,2,0,"small",5),t(),n(74,"div",20)(75,"label",3),o(76," Email"),t(),y(77,"input",24),s(78,rt,2,0,"small",5),t(),n(79,"div",10)(80,"div",25)(81,"button",26),o(82,"Submit"),t(),s(83,it,2,0,"button",27),t()()()()),i&2){let d,_,U,E,S,A,N,b,P,D,T,I,w,L,x,q,z,O,R,V,M,k,j,G,Z;p(),m("formGroup",e.propertyUnitForm),p(4),m("ngClass",g(28,f,(((d=e.propertyUnitForm.get("propertyUnitName"))==null?null:d.dirty)||((d=e.propertyUnitForm.get("propertyUnitName"))==null?null:d.touched))&&((d=e.propertyUnitForm.get("propertyUnitName"))==null?null:d.invalid))),p(),m("ngIf",(((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.dirty)||((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.touched))&&((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.invalid)),p(4),m("ngClass",g(30,f,(((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.dirty)||((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.touched))&&((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.invalid))),p(),m("ngIf",(((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.dirty)||((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.touched))&&((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.invalid)),p(6),m("ngForOf",e.PropertyTypes),p(),m("ngIf",(((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.dirty)||((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.touched))&&((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.invalid)),p(4),m("ngClass",g(32,f,(((A=e.propertyUnitForm.get("description"))==null?null:A.dirty)||((A=e.propertyUnitForm.get("description"))==null?null:A.touched))&&((A=e.propertyUnitForm.get("description"))==null?null:A.invalid))),p(),m("ngIf",(((N=e.propertyUnitForm.get("description"))==null?null:N.dirty)||((N=e.propertyUnitForm.get("description"))==null?null:N.touched))&&((N=e.propertyUnitForm.get("description"))==null?null:N.invalid)),p(7),m("ngClass",g(34,f,(((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.dirty)||((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.touched))&&((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.invalid))),p(),m("ngIf",(((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.dirty)||((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.touched))&&((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.invalid)),p(8),m("ngClass",g(36,f,(((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.dirty)||((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.touched))&&((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.invalid))),p(),m("ngIf",(((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.dirty)||((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.touched))&&((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.invalid)),p(4),m("ngClass",g(38,f,(((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.dirty)||((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.touched))&&((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.invalid))),p(),m("ngIf",(((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.dirty)||((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.touched))&&((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.invalid)),p(4),m("ngClass",g(40,f,(((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.dirty)||((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.touched))&&((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.invalid))),p(),m("ngIf",(((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.dirty)||((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.touched))&&((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.invalid)),p(4),m("ngClass",g(42,f,(((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.dirty)||((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.touched))&&((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.invalid))),p(),m("ngIf",((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.invalid)&&(((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.dirty)||((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.touched))),p(7),m("ngClass",g(44,f,(((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.dirty)||((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.touched))&&((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.invalid))),p(),m("ngIf",(((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.dirty)||((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.touched))&&((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.invalid)),p(4),m("ngClass",g(46,f,(((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.dirty)||((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.touched))&&((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.invalid))),p(),m("ngIf",(((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.dirty)||((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.touched))&&((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.invalid)),p(4),m("ngClass",g(48,f,(((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.dirty)||((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.touched))&&((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.invalid))),p(),m("ngIf",(((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.dirty)||((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.touched))&&((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.invalid)),p(4),m("ngClass",g(50,f,(((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.dirty)||((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.touched))&&((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.invalid))),p(),m("ngIf",(((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.dirty)||((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.touched))&&((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.invalid)),p(5),m("ngIf",e.propertyUnitId!="ADD")}},dependencies:[ue,me,se,de,ge,Ie,Ce,be,Pe,ve,Ne,he,Fe,De,we,Ee,Ae,Se,K],styles:[".form-label[_ngcontent-%COMP%]{margin-bottom:0}.form-control.is-invalid[_ngcontent-%COMP%]{background-image:none;padding-right:.375rem .75rem}.container_form[_ngcontent-%COMP%]{background:#00000023}"]});let r=a;return r})();export{St as AddUpdatePropertyComponent};

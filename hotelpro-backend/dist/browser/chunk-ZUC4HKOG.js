import{a as wt,b as vt}from"./chunk-LIPDJV2Z.js";import{d as Ct}from"./chunk-24LOKUE6.js";import{c as at,d as V,e as rt,f as lt,j as ct,k as dt,l as mt,m as st,p as pt,q as _t,r as gt,s as ht,u as ut,x as ft,y as xt,z as Mt}from"./chunk-VIVXY5RX.js";import{b as ot}from"./chunk-SWGOWEHE.js";import{Aa as S,Ba as D,Ca as u,Da as d,Db as X,Fb as tt,Ib as et,Jb as A,L as B,La as q,Lb as nt,Ma as r,Mb as it,Na as C,Oa as T,R as _,S as g,T as I,Ta as y,U as N,Ua as b,Va as E,Xa as $,Za as W,a as z,bb as P,db as k,ea as c,eb as Y,fa as O,la as h,na as s,nb as Z,oa as j,ob as J,pb as K,qa as H,ra as G,tb as R,wa as n,wb as Q,xa as e,ya as w,za as v}from"./chunk-CWTEAQ4G.js";var St=l=>({clean_active:l}),yt=l=>({dirty_active:l});function bt(l,m){if(l&1&&(n(0,"th"),r(1),P(2,"date"),e()),l&2){let i=m.$implicit;c(),T(" ",k(2,1,i,"dd MMM")," ")}}function Et(l,m){if(l&1&&(n(0,"div")(1,"div",34)(2,"div",43)(3,"div",44),r(4),e()()()()),l&2){let i=d(2).$implicit,o=d(4);H("width:"+o.nightNumber(i.arrival,i.departure)*96+"px;"),G(""+o.setBackground(i)),c(4),T(" ",i.guestName," ")}}function Rt(l,m){if(l&1&&(v(0),h(1,Et,5,5,"div",42),S()),l&2){let i=d().$implicit,o=d().$implicit,t=d(3);c(),s("ngIf",t.test(o,i))}}function Dt(l,m){if(l&1&&(v(0),h(1,Rt,2,1,"ng-container",37),S()),l&2){let i=m.$implicit,o=d().$implicit;c(),s("ngIf",i.arrival<=o&&i.departure>o&&!i.tentative)}}function Ot(l,m){if(l&1){let i=D();n(0,"div",46),u("click",function(){_(i);let t=d(2).$implicit,a=d(4);return g(a.maintainance(t))}),n(1,"div",47)(2,"div",6),I(),n(3,"svg",48),w(4,"path",49)(5,"path",50),e()(),N(),n(6,"div",51)(7,"div",52),r(8),e()()()()}if(l&2){let i=d(2).$implicit,o=d(4);j("width",o.nightNumber(i.startDate,i.endDate)*90+"px"),c(8),T(" ",i.reason," ")}}function Tt(l,m){if(l&1&&(v(0),h(1,Ot,9,3,"div",45),S()),l&2){let i=d().$implicit,o=d().$implicit,t=d(3);c(),s("ngIf",t.testmaintainance(o,i))}}function Pt(l,m){if(l&1&&(v(0),h(1,Tt,2,1,"ng-container",37),S()),l&2){let i=m.$implicit,o=d().$implicit;c(),s("ngIf",i.startDate<=o&&i.endDate>=o)}}function kt(l,m){if(l&1&&(n(0,"td")(1,"div"),h(2,Dt,2,1,"ng-container",30)(3,Pt,2,1,"ng-container",30),e()()),l&2){let i=d(2).$implicit;c(2),s("ngForOf",i.Reservation),c(),s("ngForOf",i.RoomMaintainance)}}function At(l,m){if(l&1&&(n(0,"tr")(1,"td",38),r(2),e(),n(3,"td",38),r(4),e(),n(5,"td",38)(6,"div",39)(7,"div",40),r(8," Clean "),e(),n(9,"div",41),r(10," Dirty "),e()()(),h(11,kt,4,2,"td",30),e()),l&2){let i=d().$implicit,o=d();c(2),C(i.roomType),c(2),T(" ",i.roomName," "),c(3),s("ngClass",W(5,St,i.roomCondition=="clean")),c(2),s("ngClass",W(7,yt,i.roomCondition=="dirty")),c(2),s("ngForOf",o.DateArr)}}function Vt(l,m){if(l&1&&(v(0),h(1,At,12,9,"tr",37),S()),l&2){let i=m.$implicit;c(),s("ngIf",i.Show)}}function It(l,m){if(l&1){let i=D();n(0,"div",63),u("click",function(){_(i);let t=d(2);return g(t.showEdit())}),I(),n(1,"svg",64),w(2,"path",65),e()()}}function Nt(l,m){if(l&1&&(n(0,"div",66)(1,"div",67),r(2,"Notes :"),e(),n(3,"small",68),r(4),e()()),l&2){let i=d(2);c(4),C(i.CurrentMaintainance.description)}}function Wt(l,m){if(l&1){let i=D();n(0,"div",53)(1,"div",54)(2,"div",55)(3,"div",56),r(4),e()(),h(5,It,3,0,"div",57),e(),n(6,"table",58)(7,"thead")(8,"th"),r(9,"Room"),e(),n(10,"th"),r(11,"Start"),e(),n(12,"th"),r(13,"End"),e()(),n(14,"tbody")(15,"td"),r(16),e(),n(17,"td"),r(18),P(19,"date"),e(),n(20,"td"),r(21),P(22,"date"),e()()(),h(23,Nt,5,1,"div",59),n(24,"div",60)(25,"button",61),u("click",function(){_(i);let t=d();return g(t.Cancelupdate())}),r(26," Cancel "),e(),n(27,"button",62),u("click",function(){_(i);let t=d();return g(t.updateMaintenance(!0))}),r(28," Complete "),e()()()}if(l&2){let i=d();c(4),T(" ",i.CurrentMaintainance.reason," "),c(),s("ngIf",!i.CurrentMaintainance.isCompleted),c(11),C(i.CurrentMaintainance.roomName),c(2),C(k(19,7,i.CurrentMaintainance.startDate,"MMM d")),c(3),C(k(22,10,i.CurrentMaintainance.endDate,"MMM d")),c(2),s("ngIf",i.CurrentMaintainance.description),c(4),s("disabled",i.CurrentMaintainance.isCompleted)}}function Ut(l,m){l&1&&(n(0,"p",92),r(1," Enter valid Date! "),e())}function Ft(l,m){l&1&&(n(0,"p",92),r(1," Enter valid Date! "),e())}function Lt(l,m){if(l&1&&(n(0,"option",93),r(1),e()),l&2){let i=m.$implicit;s("value",i._id),c(),T(" ",i._id," ")}}function zt(l,m){l&1&&(n(0,"p",92),r(1," Enter valid RoomType! "),e())}function Bt(l,m){l&1&&(n(0,"p",92),r(1," Enter valid RoomType! "),e())}function jt(l,m){l&1&&(n(0,"p",92),r(1," Enter valid Reason! "),e())}function Ht(l,m){if(l&1){let i=D();v(0),n(1,"form",69)(2,"table",70)(3,"tr")(4,"td")(5,"div",71),r(6,"Start Date*:"),e()(),n(7,"td")(8,"input",72),u("input",function(){_(i);let t=d();return g(t.getAvailRoomdata())}),e(),h(9,Ut,2,0,"p",73),e()(),n(10,"tr")(11,"td")(12,"div",71),r(13,"End Date*:"),e()(),n(14,"td")(15,"input",74),u("input",function(){_(i);let t=d();return g(t.getAvailRoomdata())}),e(),h(16,Ft,2,0,"p",73),e()(),n(17,"tr")(18,"td")(19,"div",71),r(20,"Room Type:"),e()(),n(21,"td")(22,"div")(23,"select",75),u("change",function(t){_(i);let a=d();return g(a.showRooms(t))}),n(24,"option",76),r(25,"Select Type"),e(),h(26,Lt,2,2,"option",77),e(),h(27,zt,2,0,"p",73),e()()(),n(28,"tr")(29,"td")(30,"div"),r(31,"Room*:"),e()(),n(32,"td")(33,"div"),w(34,"ng-multiselect-dropdown",78),h(35,Bt,2,0,"p",73),e()()(),n(36,"tr")(37,"td")(38,"div",71),r(39,"Reason*:"),e()(),n(40,"td")(41,"div",79)(42,"select",80)(43,"option",76),r(44,"Select One"),e(),n(45,"option",81),r(46,"Plumbing"),e(),n(47,"option",82),r(48,"Heater/AC"),e(),n(49,"option",83),r(50,"Painting"),e(),n(51,"option",84),r(52,"Door"),e(),n(53,"option",85),r(54,"Renovation"),e(),n(55,"option",86),r(56,"Telephone"),e(),n(57,"option",87),r(58,"Television/Cable"),e(),n(59,"option",88),r(60,"Deep Cleaning"),e(),n(61,"option",89),r(62,"Other"),e()(),w(63,"div",90),e(),h(64,jt,2,0,"p",73),e()(),n(65,"tr")(66,"td")(67,"div",71),r(68,"Notes:"),e()(),n(69,"td"),w(70,"textarea",91),e()()(),n(71,"div",60)(72,"button",61),u("click",function(){_(i);let t=d();return g(t.cancelpop())}),r(73," Cancel "),e(),n(74,"button",62),u("click",function(){_(i);let t=d();return g(t.addMaintenance())}),r(75," Add "),e()()(),S()}if(l&2){let i=d();c(),s("formGroup",i.AddMaintenance),c(7),s("min",i.Today),c(),s("ngIf",i.AddMaintenance.controls.startDate.touched&&i.AddMaintenance.controls.startDate.invalid),c(6),s("min",i.getTomorrow()),c(),s("ngIf",i.AddMaintenance.controls.endDate.touched&&i.AddMaintenance.controls.endDate.invalid),c(10),s("ngForOf",i.availableRoom),c(),s("ngIf",i.AddMaintenance.controls.roomType.touched&&i.AddMaintenance.controls.roomType.invalid),c(7),s("placeholder","Select Room")("settings",i.dropdownSettingsRooms)("data",i.dropdownListRoom),c(),s("ngIf",i.AddMaintenance.controls.Rooms.touched&&i.AddMaintenance.controls.Rooms.invalid),c(29),s("ngIf",i.AddMaintenance.controls.Reason.touched&&i.AddMaintenance.controls.Reason.invalid),c(10),s("disabled",i.AddMaintenance.invalid)}}function Gt(l,m){if(l&1&&(n(0,"option",93),r(1),e()),l&2){let i=m.$implicit;s("value",i),c(),T(" ",i," ")}}function qt(l,m){if(l&1){let i=D();v(0),n(1,"div",94)(2,"table",70)(3,"tr")(4,"td")(5,"div",95),r(6,"Start Date:"),e()(),n(7,"td")(8,"input",96),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.startDate,t)||(a.CurrentMaintainance.startDate=t),g(t)}),e()()(),n(9,"tr")(10,"td")(11,"div",95),r(12,"End Date:"),e()(),n(13,"td")(14,"input",96),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.endDate,t)||(a.CurrentMaintainance.endDate=t),g(t)}),e()()(),n(15,"tr")(16,"td")(17,"div",95),r(18,"Room Type:"),e()(),n(19,"td")(20,"div",79)(21,"select",97),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.roomType,t)||(a.CurrentMaintainance.roomType=t),g(t)}),h(22,Gt,2,2,"option",77),e(),w(23,"div",90),e()()(),n(24,"tr")(25,"td")(26,"div",95),r(27,"Room:"),e()(),n(28,"td")(29,"input",98),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.roomName,t)||(a.CurrentMaintainance.roomName=t),g(t)}),e()()(),n(30,"tr")(31,"td")(32,"div",95),r(33,"Reason*:"),e()(),n(34,"td")(35,"div",79)(36,"select",99),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.reason,t)||(a.CurrentMaintainance.reason=t),g(t)}),n(37,"option",76),r(38,"Select One"),e(),n(39,"option",81),r(40,"Plumbing"),e(),n(41,"option",82),r(42,"Heater/AC"),e(),n(43,"option",83),r(44,"Painting"),e(),n(45,"option",84),r(46,"Door"),e(),n(47,"option",85),r(48,"Renovation"),e(),n(49,"option",86),r(50,"Telephone"),e(),n(51,"option",87),r(52,"Television/Cable"),e(),n(53,"option",88),r(54,"Deep Cleaning"),e(),n(55,"option",89),r(56,"Other"),e()(),w(57,"div",90),e()()(),n(58,"tr")(59,"td")(60,"div",95),r(61,"Notes:"),e()(),n(62,"td")(63,"textarea",100),E("ngModelChange",function(t){_(i);let a=d();return b(a.CurrentMaintainance.description,t)||(a.CurrentMaintainance.description=t),g(t)}),e()()()(),n(64,"div",60)(65,"button",61),u("click",function(){_(i);let t=d();return g(t.cancelpop())}),r(66," Cancel "),e(),n(67,"button",101),u("click",function(){_(i);let t=d();return g(t.updateMaintenance(!1))}),r(68," Update "),e()()(),S()}if(l&2){let i=d();c(8),y("ngModel",i.CurrentMaintainance.startDate),c(6),y("ngModel",i.CurrentMaintainance.endDate),c(7),y("ngModel",i.CurrentMaintainance.roomType),c(),s("ngForOf",i.RoomTypes),c(7),y("ngModel",i.CurrentMaintainance.roomName),c(7),y("ngModel",i.CurrentMaintainance.reason),c(27),y("ngModel",i.CurrentMaintainance.description)}}function $t(l,m){if(l&1){let i=D();v(0),n(1,"tr")(2,"td")(3,"div",71)(4,"input",109),u("change",function(t){let a=_(i).$implicit,p=d(3);return g(p.onSelectChange(a,t))}),e()()(),n(5,"td"),r(6),e(),n(7,"td"),r(8),e(),n(9,"td"),r(10),P(11,"date"),e(),n(12,"td"),r(13),P(14,"date"),e(),n(15,"td"),r(16),e()(),S()}if(l&2){let i=m.$implicit,o=d().$implicit,t=d(2);c(4),s("checked",t.isSelected(i)),c(2),C(o.roomType),c(2),C(o.roomName),c(2),C(k(11,6,i.startDate,"dd/MM/yyyy")),c(3),C(k(14,9,i.endDate,"dd/MM/yyyy")),c(3),C(i.reason)}}function Yt(l,m){if(l&1&&(v(0),h(1,$t,17,12,"ng-container",30),S()),l&2){let i=m.$implicit;c(),s("ngForOf",i.RoomMaintainance)}}function Zt(l,m){if(l&1){let i=D();n(0,"div",102)(1,"h4",103),r(2,"Range Update"),e(),n(3,"button",104),u("click",function(){let t=_(i).$implicit;return g(t.dismiss(!1))}),e()(),n(4,"div",105)(5,"table",106)(6,"thead")(7,"tr")(8,"th")(9,"div",34)(10,"div"),r(11,"Select all"),e(),n(12,"input",107),u("change",function(t){_(i);let a=d();return g(a.toggleSelectAll(t))}),e()()(),n(13,"th"),r(14,"Room Type"),e(),n(15,"th"),r(16,"Room"),e(),n(17,"th"),r(18,"Start Date"),e(),n(19,"th"),r(20,"End Date"),e(),n(21,"th"),r(22,"Reason"),e()()(),n(23,"tbody"),h(24,Yt,2,1,"ng-container",30),e()()(),n(25,"div",39)(26,"button",108),u("click",function(){_(i);let t=d();return g(t.rangeUpdate())}),r(27," Complete "),e()()}if(l&2){let i=d();c(24),s("ngForOf",i.RoomData)}}var me=(()=>{let m=class m{constructor(o,t,a,p,f,x,M){this.crudService=o,this.fb=t,this.alertService=a,this.router=p,this.activeRoute=f,this.modalService=x,this.authService=M,this.propertyUnitId="",this.ShowAdd=!1,this.Week=2,this.ShowMain=!1,this.dropdownListRoom=[],this.dropdownList=[],this.selectedItems=[],this.ShowEdit=!1,this.RangeMaintenance=[]}ngOnInit(){this.propertyUnitId=this.authService.getUserInfo()?.user?.propertyUnitId,this.ShowAdd=!1,this.Max=new R("en-US").transform(new Date,"yyyy-MM-dd"),this.Date=new R("en-US").transform(new Date,"yyyy-MM-dd"),this.Today=new R("en-US").transform(new Date,"yyyy-MM-dd"),this.Tomorrow=new Date(this.Today),this.Tomorrow.setDate(this.Tomorrow.getDate()+1),this.Tomorrow=new R("en-US").transform(this.Tomorrow,"yyyy-MM-dd"),this.dropdownListRoom=[],this.AddMaintenance=this.fb.group({propertyUnitId:[this.propertyUnitId],startDate:["",V.required],endDate:["",V.required],roomType:["",V.required],Rooms:[[],V.required],Reason:["",V.required],Notes:[""]}),this.dropdownSettings={singleSelection:!1,idField:"item_id",textField:"item_text",unSelectAllText:"UnSelect All",enableCheckAll:!1,itemsShowLimit:2,allowSearchFilter:!0},this.dropdownSettingsRooms={singleSelection:!1,idField:"item_id",textField:"item_text",unSelectAllText:"UnSelect All",enableCheckAll:!0,itemsShowLimit:1,allowSearchFilter:!0},this.fetchdata()}fetchdata(){if(this.Week<2&&(this.Week=2),new Date(this.Date).toISOString()<new Date(this.Today).toISOString()){this.Date=this.Today,this.alertService.errorAlert("You can not visit past data");return}this.AddMaintenance.reset({roomType:"",Reason:"",Rooms:[]}),this.ShowAdd=!1,this.startDate=new Date(this.Date.replace(/-/g,"/")),this.endDate=new Date(this.startDate),this.endDate.setDate(this.endDate.getDate()+this.Week*7),this.DateArr=[];for(let o=new Date(this.startDate);o<new Date(this.endDate);o.setDate(o.getDate()+1))this.DateArr.push(new Date(o));this.crudService.post(A.READ_ROOM_MAINTENANCE,{startDate:this.startDate,endDate:this.endDate,propertyUnitId:this.propertyUnitId}).then(o=>{this.dropdownList=[],this.RoomData=this.roomSort(o.data.Rooms);for(let t of this.RoomData){for(let a of t.Reservation)a.arrival=new Date(a.arrival.split("T")[0].replace(/-/g,"/")+" 00:00"),a.departure=new Date(a.departure.split("T")[0].replace(/-/g,"/")+" 00:00");for(let a of t.RoomMaintainance)a.startDate=new Date(a.startDate.split("T")[0].replace(/-/g,"/")+" 00:00"),a.endDate=new Date(a.endDate.split("T")[0].replace(/-/g,"/")+" 00:00");this.dropdownList.includes(t.roomType)||this.dropdownList.push(t.roomType),t.Show=!0}this.RoomTypes=[...this.dropdownList],this.dropdownList=this.dropdownList.map(t=>({item_id:t,item_text:t}))}).catch(o=>{this.alertService.errorAlert(o.statusMessage)})}roomSort(o){return o.sort((t,a)=>t.roomType<a.roomType?-1:t.roomType>a.roomType?1:t.roomName<a.roomName?-1:t.roomName>a.roomName?1:0),o}setBackground(o){return o.reservationStatus=="reserved"?"reservation":o.ReservationStatus=="inhouse"?"inhouse":o.ReservationStatus=="checkedout"?"checkedout":""}getAvailRoomdata(){this.AddMaintenance.patchValue({roomType:"",Reason:"",Rooms:[]}),this.AddMaintenance.controls.startDate.value?.toString()>=this.AddMaintenance.controls.endDate.value?.toString()&&this.AddMaintenance.patchValue({endDate:this.getTomorrow()}),this.AddMaintenance.controls.startDate.value&&this.AddMaintenance.controls.endDate.value&&this.crudService.post(A.READ_AVAILABLE_ROOM_FOR_DATERANGE,{startDate:this.AddMaintenance.controls.startDate.value,endDate:this.AddMaintenance.controls.endDate.value,propertyUnitId:this.propertyUnitId}).then(o=>{this.availableRoom=o.data.RoomTypes}).catch(o=>{this.alertService.errorAlert(o.message)})}showRooms(o){for(let t of this.availableRoom)if(t._id==o.target.value){this.dropdownListRoom=[],this.AddMaintenance.controls.Rooms.setValue([]);for(let a of t.rooms){let p={item_id:a._id,item_text:a.roomName};this.dropdownListRoom.push(p)}break}}add(){this.Week+=1}sub(){this.Week>2&&(this.Week-=1)}test(o,t){return o.toString()==t.arrival.toString()||t.arrival<=this.startDate&&o.toString()==this.startDate.toString()}testmaintainance(o,t){return o.toString()==t.startDate.toString()||t.startDate<=this.startDate&&o.toString()==this.startDate.toString()}showAddpop(){this.ShowMain=!1,this.ShowAdd=!0,this.ShowEdit=!1}cancelpop(){this.ShowAdd=!1,this.ShowEdit=!1}getTomorrow(){return this.Tomorrow=new Date(this.AddMaintenance.controls.startDate.value),this.Tomorrow.setDate(this.Tomorrow.getDate()+1),this.Tomorrow=new R("en-US").transform(this.Tomorrow,"yyyy-MM-dd"),this.Tomorrow}nightNumber(o,t){let a=new Date(o),p=new Date(t),f=new Date(this.endDate),x=new Date(this.startDate);x.setUTCHours(0,0,0,0),f.setUTCHours(0,0,0,0),a.setUTCHours(0,0,0,0),p.setUTCHours(0,0,0,0);let M=0;if(a<x){p>f&&(M=Math.abs(p.getTime()-f.getTime()),M=Math.round(M/(24*60*60*1e3)),M+=.3),p.toString()==f.toString()&&(M=.3);let F=(x.getTime()-a.getTime())/(24*60*60*1e3),L=(p.getTime()-a.getTime())/(24*60*60*1e3);return L-F-M>=1?L-F-M:.7}p>f&&(M=Math.abs(p.getTime()-f.getTime()),M=Math.round(M/(1e3*3600*24)),M+=.3),p.toString()==f.toString()&&(M=.3);let U=Math.round((p.getTime()-a.getTime())/(1e3*3600*24));return U-M>=1?U-M:.7}filterRoom(){let o=this.selectedItems.map(t=>t.item_id);if(o.length>0)for(let t of this.RoomData)o.includes(t.roomType)?t.Show=!0:t.Show=!1;else for(let t of this.RoomData)t.Show=!0}maintainance(o){this.ShowAdd=!1,this.ShowMain=!0,this.ShowEdit=!1,this.CurrentMaintainance=z({},o),this.CurrentMaintainance.startDate=new R("en-US").transform(new Date(this.CurrentMaintainance.startDate),"yyyy-MM-dd"),this.CurrentMaintainance.endDate=new R("en-US").transform(new Date(this.CurrentMaintainance.endDate),"yyyy-MM-dd")}addMaintenance(){let o=this.AddMaintenance.value,t=[];if(new Date(o.endDate)<new Date(o.startDate))this.alertService.errorAlert("Enter Valid Start and End Date!");else{for(let a of o.Rooms){let p={roomId:a.item_id,propertyUnitId:this.propertyUnitId,startDate:o.startDate,endDate:o.endDate,reason:o.Reason,description:o.Notes,isCompleted:!1,today:this.Today};t.push(p)}this.crudService.post(A.CREATE_ROOM_MAINTENANCE,{RoomMaintainance:t}).then(a=>{this.fetchdata()}).catch(a=>{this.alertService.errorAlert(a?.error?.message)})}}Cancelupdate(){this.ShowMain=!1}updateMaintenance(o){if(o)this.CurrentMaintainance.isCompleted=!0,this.CurrentMaintainance.endDate=new Date(this.Today),this.CurrentMaintainance.endDate.setUTCHours(0,0,0,0);else{let t=new Date;t.setDate(t.getDate()+1),t.setHours(0,0,0,0);let a=new Date(this.CurrentMaintainance.startDate);a.setHours(0,0,0,0);let p=new Date(this.CurrentMaintainance.endDate);if(p.setHours(0,0,0,0),a>=p){this.alertService.errorAlert("Enter Valid Start and End Date!");return}else if(a<t&&p<t){this.alertService.errorAlert("Enter Valid Start and End Date!");return}}this.CurrentMaintainance.RoomMaintainanceId=this.CurrentMaintainance._id,this.CurrentMaintainance.Today=this.Today,this.crudService.post(A.UPDATE_ROOM_MAINTENANCE,this.CurrentMaintainance).then(t=>{this.alertService.successAlert("Room maintenance updated successfully"),this.fetchdata()}).catch(t=>{this.alertService.errorAlert(t.message)})}showEdit(){this.ShowMain=!1,this.ShowAdd=!1,this.ShowEdit=!0}openRangeUpdateModal(o){this.modalService.open(o).result.then(t=>{})}rangeUpdate(){let o={RangeMaintenance:this.RangeMaintenance};this.crudService.post(A.UPDATE_ROOM_MAINTENANCE_RANGE,o).then(t=>{this.alertService.successAlert("Room maintainance completed Successfully!"),this.modalService.dismissAll(),this.ngOnInit()}).catch(t=>{this.alertService.errorAlert(t.message)})}onSelectChange(o,t){if(t.target.checked)this.RangeMaintenance.push(o);else{let a=this.RangeMaintenance.indexOf(o);a!==-1&&this.RangeMaintenance.splice(a,1)}}isSelected(o){return this.RangeMaintenance.includes(o)}toggleSelectAll(o){let t=o.target.checked;if(this.RangeMaintenance=[],t)for(let a of this.RoomData)for(let p of a.RoomMaintainance)this.RangeMaintenance.push(p);else this.RangeMaintenance=[]}};m.\u0275fac=function(t){return new(t||m)(O(nt),O(ft),O(it),O(tt),O(X),O(Ct),O(ot))},m.\u0275cmp=B({type:m,selectors:[["app-room-maintenance"]],standalone:!0,features:[$],decls:56,vars:13,consts:[["Range",""],[1,"p-2",2,"background-color","#f1f8ff"],[1,"mx-3","inline1","mt-4","bg-white"],[1,"col-12","inline","justify-content-center"],[1,"inline1","my-2"],[1,"black_font","mt-2"],[1,"ms-2"],["type","date",1,"form-control",3,"ngModelChange","ngModel","min"],[1,"black_font","mt-2","ms-3"],[1,"input_container","ms-2"],["type","number",1,"input","form-control","field","text-center","hide-spinner",3,"ngModelChange","ngModel","min"],[1,"input_img",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","22","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-circle"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],[1,"input_img1",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","22","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-dash-circle"],["d","M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"],[1,"ms-3"],[1,"btn","btn-success","button","w-auto",3,"click"],[1,"ms-3","btn","btn-warning","button","w-auto",3,"click"],[1,"inline1"],[1,"d-flex","ms-2","my-2"],[1,"mt-2","ms-2",2,"width","200px !important"],["name","roomtype",2,"font-size","13px !important","background","white !important",3,"ngModelChange","onSelect","onDeSelect","placeholder","settings","data","ngModel"],[1,"mx-3","mt-4","inline2","pb-3"],[1,"col-lg-9","col-md-12","col-sm-12","col-xs-12","pl-0"],["id","scroll",2,"overflow-x","auto","border-right","1px solid rgba(0, 0, 0, 0.1)","max-height","600px !important"],[1,"table-bordered","global_table",2,"overflow-x","hidden !important"],[2,"z-index","101"],[4,"ngFor","ngForOf"],[1,"mt-md-3","mt-sm-2","mt-lg-0","col-lg-3","col-md-12","col-sm-12","col-xs-12","pr-0"],[1,"ms-4"],[1,"blue_container1","d-flex","justify-content-center",2,"cursor","pointer",3,"click"],[1,"d-flex"],[1,"my-2"],["class","custom_container my-3",4,"ngIf"],[4,"ngIf"],[2,"z-index","10"],[1,"d-flex","justify-content-center"],[1,"clean","px-2",3,"ngClass"],[1,"dirty","px-2",3,"ngClass"],[3,"style","class",4,"ngIf"],[1,"col","d-flex","justify-content-center",2,"z-index","0 !important"],[1,"text-truncate",2,"margin-left","-10px !important"],["class","renovation",3,"width","click",4,"ngIf"],[1,"renovation",3,"click"],[1,"d-flex","align-items-center",2,"cursor","pointer"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-house-slash"],["d","M13.879 10.414a2.5 2.5 0 0 0-3.465 3.465zm.707.707-3.465 3.465a2.501 2.501 0 0 0 3.465-3.465m-4.56-1.096a3.5 3.5 0 1 1 4.949 4.95 3.5 3.5 0 0 1-4.95-4.95Z"],["d","M7.293 1.5a1 1 0 0 1 1.414 0L11 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l2.354 2.353a.5.5 0 0 1-.708.708L8 2.207l-5 5V13.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 2 13.5V8.207l-.646.647a.5.5 0 1 1-.708-.708z"],[1,"col","d-flex","justify-content-center",2,"z-index","0","overflow","hidden","padding-left","4px"],[1,"text-truncate"],[1,"custom_container","my-3"],[1,"blue_container","py-2","d-flex"],[1,"col","d-flex","justify-content-center"],[2,"padding-left","30px !important"],["style","column-width: 20px !important; cursor: pointer","class","me-2",3,"click",4,"ngIf"],[1,"table","table-sm","table-borderless","maintenance_table"],["class","mx-3 py-2 d-flex flex-column align-items-center","style","background-color: #f1f8ff",4,"ngIf"],[1,"d-flex","justify-content-center","mt-2","pb-2"],[1,"btn","light_button","button",3,"click"],[1,"btn","btn-primary","button","ms-2",3,"click","disabled"],[1,"me-2",2,"column-width","20px !important","cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"],[1,"mx-3","py-2","d-flex","flex-column","align-items-center",2,"background-color","#f1f8ff"],[1,"notes"],[1,""],[1,"custom_container","my-3","pt-2","pb-1","px-2",3,"formGroup"],[1,"table","table-sm","table-borderless","add_table"],[1,"mt-1"],["type","date","formControlName","startDate",1,"form-control","field",3,"input","min"],["class","text-danger",4,"ngIf"],["type","date","formControlName","endDate",1,"form-control","field",3,"input","min"],["id","options","formControlName","roomType",1,"form-control",2,"appearance","auto",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","Rooms","formControlName","Rooms",2,"background","white !important",3,"placeholder","settings","data"],[1,"select1"],["formControlName","Reason",1,"form-control","field"],["value","Plumbing"],["value","Heater/AC"],["value","Painting"],["value","Door"],["value","Renovation"],["value","Telephone"],["value","Television/Cable"],["value","Deep Cleaning"],["value","Other"],[1,"select1__arrow"],["type","text","rows","2","formControlName","Notes",1,"form-control","field"],[1,"text-danger"],[3,"value"],[1,"custom_container","my-3","pt-2","pb-1","px-2"],[1,"mt-2"],["type","date",1,"form-control","field",3,"ngModelChange","ngModel"],["disabled","",1,"form-control","field",3,"ngModelChange","ngModel"],["type","text","readonly","",1,"form-control","field",3,"ngModelChange","ngModel"],[1,"form-control","field",3,"ngModelChange","ngModel"],["type","text","rows","2",1,"form-control","field",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","button","ms-2",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[2,"overflow-x","auto","overflow-y","auto","max-height","500px"],[1,"table","table-sm","table-borderless","maintenance_table","range_table"],["type","checkbox",1,"ms-1",3,"change"],[1,"btn","btn-success","my-2",3,"click"],["type","checkbox",3,"change","checked"]],template:function(t,a){if(t&1){let p=D();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),r(5,"Start Date :"),e(),n(6,"div",6)(7,"input",7),E("ngModelChange",function(x){return _(p),b(a.Date,x)||(a.Date=x),g(x)}),e()(),n(8,"div",8),r(9,"Week :"),e(),n(10,"div",9)(11,"input",10),E("ngModelChange",function(x){return _(p),b(a.Week,x)||(a.Week=x),g(x)}),e(),n(12,"div",11),u("click",function(){return _(p),g(a.add())}),I(),n(13,"svg",12),w(14,"path",13)(15,"path",14),e()(),N(),n(16,"div",15),u("click",function(){return _(p),g(a.sub())}),I(),n(17,"svg",16),w(18,"path",13)(19,"path",17),e()()(),N(),n(20,"div",18)(21,"button",19),u("click",function(){return _(p),g(a.fetchdata())}),r(22," Find "),e()(),n(23,"button",20),u("click",function(){_(p);let x=q(55);return g(a.openRangeUpdateModal(x))}),r(24," Range Update "),e()(),n(25,"div",21)(26,"div",22)(27,"div",5),r(28,"Filter :"),e()(),n(29,"div",23)(30,"ng-multiselect-dropdown",24),E("ngModelChange",function(x){return _(p),b(a.selectedItems,x)||(a.selectedItems=x),g(x)}),u("onSelect",function(){return _(p),g(a.filterRoom())})("onDeSelect",function(){return _(p),g(a.filterRoom())}),e()()()()(),n(31,"div",25)(32,"div",26)(33,"div",27)(34,"table",28)(35,"thead")(36,"th",29),r(37,"Room Type"),e(),n(38,"th",29),r(39,"Room"),e(),n(40,"th",29),r(41,"Condition"),e(),h(42,bt,3,4,"th",30),e(),n(43,"tbody"),h(44,Vt,2,1,"ng-container",30),e()()()(),n(45,"div",31)(46,"div",32)(47,"div",33),u("click",function(){return _(p),g(a.showAddpop())}),n(48,"div",34)(49,"div",35),r(50,"+ Add Block Room"),e()()(),h(51,Wt,29,13,"div",36)(52,Ht,76,13,"ng-container",37)(53,qt,69,7,"ng-container",37),e()()()(),h(54,Zt,28,1,"ng-template",null,0,Y)}t&2&&(c(7),y("ngModel",a.Date),s("min",a.Max),c(4),y("ngModel",a.Week),s("min",2),c(19),s("placeholder","Select RoomType")("settings",a.dropdownSettings)("data",a.dropdownList),y("ngModel",a.selectedItems),c(12),s("ngForOf",a.DateArr),c(2),s("ngForOf",a.RoomData),c(7),s("ngIf",a.ShowMain),c(),s("ngIf",a.ShowAdd),c(),s("ngIf",a.ShowEdit==!0))},dependencies:[xt,dt,gt,ht,at,mt,_t,rt,lt,ut,ct,vt,wt,Q,Z,J,K,R,Mt,st,pt,et],styles:[".inline[_ngcontent-%COMP%], .inline1[_ngcontent-%COMP%], .inline2[_ngcontent-%COMP%]{display:flex}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{position:sticky!important;left:0!important;min-width:115px!important;width:115px!important;max-width:115px!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){background:#fff!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){position:sticky!important;left:114.5px!important;min-width:80px!important;width:80px!important;max-width:80px!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){position:sticky!important;left:194.5px!important;min-width:150px!important;width:150px!important;max-width:150px!important}.clean[_ngcontent-%COMP%], .dirty[_ngcontent-%COMP%]{column-width:40px}.clean_active[_ngcontent-%COMP%]{background:#6ccfca;border-radius:10px}.dirty_active[_ngcontent-%COMP%]{background:#ffa4a3;border-radius:10px}.checkedout[_ngcontent-%COMP%], .inhouse[_ngcontent-%COMP%], .reservation[_ngcontent-%COMP%]{font-size:13px;font-weight:500;letter-spacing:1px;text-transform:capitalize;margin-left:20px!important;border-radius:10px!important}.reservation[_ngcontent-%COMP%]{background:#bee2f8!important;color:#000}.inhouse[_ngcontent-%COMP%]{background:#6ccfca!important;color:#000}.checkedout[_ngcontent-%COMP%]{background:#1d366d!important;color:#fff}.add_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .black_font[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.input_container[_ngcontent-%COMP%]{position:relative;width:20%}.input_img[_ngcontent-%COMP%], .input_img1[_ngcontent-%COMP%]{bottom:2px;top:6px;width:22px;height:22px;position:absolute;cursor:pointer}.input[_ngcontent-%COMP%]{margin:0}.input_img[_ngcontent-%COMP%]{right:5px}.input_img1[_ngcontent-%COMP%]{left:5px}.button[_ngcontent-%COMP%]{width:150px}.maintenance_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .maintenance_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;font-size:12px;padding-top:10px;padding-bottom:10px;border-top:.1px solid rgba(0,0,0,.1);border-bottom:.1px solid rgba(0,0,0,.1);border-left:2px dashed rgba(0,0,0,.1);letter-spacing:.5}.maintenance_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:900;color:#1d366d}.maintenance_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:500;color:#000}.maintenance_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .maintenance_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:.1px solid rgba(0,0,0,.1)}.maintenance_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .maintenance_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:.1px solid rgba(0,0,0,.1)}.range_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#082b4a;color:#fff;font-weight:500}.add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:nth-child(2), .blue_container1[_ngcontent-%COMP%]{border-bottom-right-radius:5px;border-bottom-left-radius:5px}.custom_container[_ngcontent-%COMP%]{background-color:#fff}.blue_container[_ngcontent-%COMP%], .blue_container1[_ngcontent-%COMP%]{background:#387cf7;color:#fff;font-size:12px;letter-spacing:1px;font-weight:700}.gray_container[_ngcontent-%COMP%]{background:#f1f8ff;border-radius:5px!important}.notes[_ngcontent-%COMP%]{font-size:14px!important;text-decoration:underline;font-weight:700}.notes_font[_ngcontent-%COMP%]{font-size:13px!important;color:#000;font-weight:500}.add_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){padding-right:4px;padding-left:8px}.add_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:41.5%}.add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child, .add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:last-child{padding-top:8px}.add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child, .add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{padding-bottom:8px}.add_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:nth-child(2){border-top-right-radius:5px;border-top-left-radius:5px}.select1__arrow[_ngcontent-%COMP%]{top:13px}.renovation[_ngcontent-%COMP%]{background:#ffccd1!important;color:#000;font-size:13px;font-weight:500;letter-spacing:1px;text-transform:capitalize;margin-left:10px!important;border-radius:10px!important}.hide-spinner[_ngcontent-%COMP%]::-webkit-outer-spin-button, .hide-spinner[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}@media only screen and (max-width: 1100px){.inline[_ngcontent-%COMP%]{display:flex;flex-direction:column}}@media only screen and (max-width: 990px){.inline2[_ngcontent-%COMP%]{display:flex;flex-direction:column}.black_font[_ngcontent-%COMP%]{font-size:12px;font-weight:500}}@media only screen and (max-width: 590px){.inline1[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input_container[_ngcontent-%COMP%]{width:100%}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{min-width:60px!important;width:60px!important;max-width:60px!important;position:sticky!important;left:0!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){min-width:60px!important;width:60px!important;position:sticky!important;left:59px!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .global_table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){min-width:120px!important;width:120px!important;max-width:120px!important;position:sticky!important;left:119px!important}.global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .global_table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){background:#fff!important}.clean[_ngcontent-%COMP%], .dirty[_ngcontent-%COMP%]{column-width:15px}.reservation[_ngcontent-%COMP%]{font-size:8px!important}.black_font[_ngcontent-%COMP%]{font-size:10px;font-weight:500}}"]});let l=m;return l})();export{me as RoomMaintenanceComponent};

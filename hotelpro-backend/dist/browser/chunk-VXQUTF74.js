import{Ba as y,Ca as E,Da as _,G as x,Ga as Z,Ha as z,Ia as k,Ja as w,Ka as C,L as O,La as V,M as S,Ma as A,N,Na as M,R as d,S as c,Z as v,Za as Q,ea as f,eb as R,fa as D,ga as b,ha as I,ia as P,la as F,ma as B,na as p,pa as L,pb as j,q as T,rb as U,wa as u,wb as q,xa as m}from"./chunk-CWTEAQ4G.js";var G=["fileSelector"],H=n=>({openFileSelector:n});function $(n,r){if(n&1&&(u(0,"div",8),A(1),m()),n&2){let l=_(2);f(),M(l.dropZoneLabel)}}function J(n,r){if(n&1){let l=y();u(0,"div")(1,"input",9),E("click",function(t){d(l);let i=_(2);return c(i.openFileSelector(t))}),m()()}if(n&2){let l=_(2);f(),Z("value",l.browseBtnLabel),p("className",l.browseBtnClassName)}}function K(n,r){if(n&1&&F(0,$,2,1,"div",6)(1,J,2,2,"div",7),n&2){let l=_();p("ngIf",l.dropZoneLabel),f(),p("ngIf",l.showBrowseBtn)}}function W(n,r){}var g=class{constructor(r,l){this.relativePath=r,this.fileEntry=l}},X=(()=>{let r=class r{constructor(e){this.template=e}};r.\u0275fac=function(t){return new(t||r)(D(b))},r.\u0275dir=N({type:r,selectors:[["","ngx-file-drop-content-tmp",""]]});let n=r;return n})(),Y=(()=>{let r=class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e!=null&&`${e}`!="false"}constructor(e,t){this.zone=e,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new v,this.onFileOver=new v,this.onFileLeave=new v,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=i=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",i=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",i=>{this.globalDraggingInProgress=!1})}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(e){this.useDragEnter?(this.preventAndStop(e),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")):!this.isDropzoneDisabled()&&!this.useDragEnter&&e.dataTransfer&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e),e.dataTransfer.dropEffect="copy")}onDragEnter(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragLeave(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}dropFiles(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){let t;e.dataTransfer.items?t=e.dataTransfer.items:t=e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}}uploadFiles(e){if(!this.isDropzoneDisabled()&&e.target){let t=e.target.files||[];this.checkFiles(t),this.resetFileInput()}}getFakeDropEntry(e){let t={name:e.name,isDirectory:!1,isFile:!0,file:i=>i(e)};return new g(t.name,t)}checkFile(e){if(e){if("webkitGetAsEntry"in e){let t=e.webkitGetAsEntry();if(t){if(t.isFile){let i=new g(t.name,t);this.addToQueue(i)}else t.isDirectory&&this.traverseFileTree(t,t.name);return}}this.addToQueue(this.getFakeDropEntry(e))}}checkFiles(e){for(let t=0;t<e.length;t++)this.checkFile(e[t]);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=T(200,200).subscribe(()=>{if(this.files.length>0&&this.numOfActiveReadEntries===0){let t=this.files;this.files=[],this.onFileDrop.emit(t)}})}traverseFileTree(e,t){if(e.isFile){let i=new g(t,e);this.files.push(i)}else{t=t+"/";let i=e.createReader(),o=[],a=()=>{this.numOfActiveReadEntries++,i.readEntries(s=>{if(s.length)o=o.concat(s),a();else if(o.length===0){let h=new g(t,e);this.zone.run(()=>{this.addToQueue(h)})}else for(let h=0;h<o.length;h++)this.zone.run(()=>{this.traverseFileTree(o[h],t+o[h].name)});this.numOfActiveReadEntries--})};a()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){let e=this.fileSelector.nativeElement,t=e.parentElement,i=this.getHelperFormElement(),o=this.getFileInputPlaceholderElement();t!==i&&(this.renderer.insertBefore(t,o,e),this.renderer.appendChild(i,e),i.reset(),this.renderer.insertBefore(t,e,o),this.renderer.removeChild(t,o))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(e){this.files.push(e)}preventAndStop(e){e.stopPropagation(),e.preventDefault()}};r.\u0275fac=function(t){return new(t||r)(D(P),D(I))},r.\u0275cmp=O({type:r,selectors:[["ngx-file-drop"]],contentQueries:function(t,i,o){if(t&1&&z(o,X,5,b),t&2){let a;w(a=C())&&(i.contentTemplate=a.first)}},viewQuery:function(t,i){if(t&1&&k(G,7),t&2){let o;w(o=C())&&(i.fileSelector=o.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[["fileSelector",""],["defaultContentTemplate",""],[3,"drop","dragover","dragenter","dragleave","className"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"change","accept","multiple"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"click","className","value"]],template:function(t,i){if(t&1){let o=y();u(0,"div",2),E("drop",function(s){return d(o),c(i.dropFiles(s))})("dragover",function(s){return d(o),c(i.onDragOver(s))})("dragenter",function(s){return d(o),c(i.onDragEnter(s))})("dragleave",function(s){return d(o),c(i.onDragLeave(s))}),u(1,"div",3)(2,"input",4,0),E("change",function(s){return d(o),c(i.uploadFiles(s))}),m(),F(4,K,2,2,"ng-template",null,1,R)(6,W,0,0,"ng-template",5),m()()}if(t&2){let o=V(5);L("ngx-file-drop__drop-zone--over",i.isDraggingOverDropZone),p("className",i.dropZoneClassName),f(),p("className",i.contentClassName),f(),p("accept",i.accept)("multiple",i.multiple),B("directory",i.directory||void 0)("webkitdirectory",i.directory||void 0)("mozdirectory",i.directory||void 0)("msdirectory",i.directory||void 0)("odirectory",i.directory||void 0),f(4),p("ngTemplateOutlet",i.contentTemplate||o)("ngTemplateOutletContext",Q(13,H,i.openFileSelector))}},dependencies:[j,U],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{height:100px;margin:auto;border:2px dotted #0782d0;border-radius:30px}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:#93939380}.ngx-file-drop__content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100px;color:#0782d0}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]});let n=r;return n})(),fe=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=S({type:r,bootstrap:[Y]}),r.\u0275inj=x({imports:[q]});let n=r;return n})();export{X as a,Y as b,fe as c};

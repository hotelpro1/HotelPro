import{a as qe,b as Oe,c as X}from"./chunk-VXQUTF74.js";import{a as v}from"./chunk-MSXCR3QF.js";import{c as ve,d as u,e as Ce,f as Ee,k as Se,m as Ae,n as Ne,p as be,q as De,r as Pe,s as Te,x as we,y as Ie,z as Le}from"./chunk-VIVXY5RX.js";import{b as he}from"./chunk-SWGOWEHE.js";import{Ba as Y,Ca as h,Da as J,Db as ge,Fb as fe,Ia as oe,Ib as _e,Ja as pe,Jb as $,Ka as ae,L as B,Lb as Ue,Ma as l,Mb as Fe,Na as me,Oa as se,R as H,S as W,Xa as K,Z as te,Za as c,aa as re,ea as o,fa as F,la as d,na as m,nb as de,ob as ue,pb as ye,sa as ee,ta as ie,ua as ne,va as le,wa as i,wb as ce,xa as t,ya as y}from"./chunk-CWTEAQ4G.js";function Re(r,p){if(r&1){let f=Y();i(0,"button",6),h("click",function(){let n=H(f).openFileSelector;return W(n())}),l(1," Select "),t()}}function Ve(r,p){if(r&1){let f=Y();i(0,"div",3),y(1,"img",7),i(2,"i",8),h("click",function(){let n=H(f).$index,e=J();return W(e.removeFile(n))}),l(3," cancel "),t()()}if(r&2){let f=p.$implicit;o(),m("src",f,re)}}function ke(r,p){if(r&1&&(i(0,"div",4),l(1),t()),r&2){let f=J();o(),me(f.fileError)}}function xe(r,p){if(r&1){let f=Y();i(0,"button",9),h("click",function(){H(f);let n=J();return W(n.uploadFiles())}),l(1,"Upload"),t()}}var ze=(()=>{let p=class p{constructor(){this.multiple=!0,this.acceptTypes=".jpg, .jpeg, .png, .JPG, .JPEG, .PNG",this.maxFileSize=2e6,this.onUpload=new te,this.fileError="",this.filePreviews=[],this.files=[]}droppedFiles(a){if(this.clearErrors(),!this.multiple&&a.length>1){this.fileError="Only one file is allowed.";return}this.files=[],this.filePreviews=[];for(let n of a)n.fileEntry.isFile&&this.isFileAllowed(n.fileEntry.name)?n.fileEntry.file(s=>{this.isFileSizeAllowed(s.size)?(this.files.push(s),this.generatePreview(s)):this.fileError="Max size of a file allowed is 2 MB."}):this.fileError="Only files in '.jpg', '.jpeg', '.png' format are accepted."}isFileAllowed(a){let n=this.acceptTypes.split(",").map(s=>s.trim()),e=a.substring(a.lastIndexOf(".")).toLowerCase();return n.includes(e)}isFileSizeAllowed(a){return a<=this.maxFileSize}generatePreview(a){let n=new FileReader;n.onload=e=>{this.filePreviews.push(e.target.result)},n.readAsDataURL(a)}removeFile(a){this.filePreviews.splice(a,1),this.files.splice(a,1)}uploadFiles(){if(this.files.length===0){this.fileError="No files to upload.";return}this.onUpload.emit(this.files)}clearErrors(){this.fileError=""}clearFiles(){this.filePreviews=[],this.files=[]}};p.\u0275fac=function(n){return new(n||p)},p.\u0275cmp=B({type:p,selectors:[["app-file-upload"]],inputs:{multiple:"multiple",acceptTypes:"acceptTypes",maxFileSize:"maxFileSize"},outputs:{onUpload:"onUpload"},standalone:!0,features:[K],decls:7,vars:4,consts:[["dropZoneClassName","my-style","contentClassName","my-style",3,"onFileDrop","accept","multiple"],["ngx-file-drop-content-tmp",""],[1,"d-flex"],[2,"position","relative"],[1,"error"],[1,"btn","btn-primary","mt-3"],["type","button",1,"btn","btn-primary",3,"click"],["alt","File Preview",2,"width","300px","height","200px",3,"src"],[1,"material-symbols-rounded","text-danger",2,"position","absolute","right","4px","background","white","cursor","pointer",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(n,e){n&1&&(i(0,"ngx-file-drop",0),h("onFileDrop",function(_){return e.droppedFiles(_)}),d(1,Re,2,0,"ng-template",1),t(),i(2,"div",2),ne(3,Ve,4,1,"div",3,ie),t(),d(5,ke,2,1,"div",4)(6,xe,2,0,"button",5)),n&2&&(m("accept",e.acceptTypes)("multiple",e.multiple),o(3),le(e.filePreviews),o(2),ee(5,e.fileError?5:-1),o(),ee(6,!e.fileError&&e.files.length>0?6:-1))},dependencies:[X,Oe,qe]});let r=p;return r})();var g=r=>({"is-invalid":r});function je(r,p){r&1&&(i(0,"small",27),l(1,"Property Unit Name is required"),t())}function Ge(r,p){r&1&&(i(0,"small",27),l(1,"Property Unit Legal Name is required"),t())}function Ze(r,p){if(r&1&&(i(0,"option",28),l(1),t()),r&2){let f=p.$implicit;m("value",f),o(),se(" ",f," ")}}function Qe(r,p){r&1&&(i(0,"small",27),l(1,"Property Unit Type is required"),t())}function $e(r,p){r&1&&(i(0,"small",27),l(1,"Description is required"),t())}function Be(r,p){r&1&&(i(0,"small",27),l(1,"Website is required"),t())}function He(r,p){r&1&&(i(0,"small",27),l(1,"Address Line 1 is required"),t())}function We(r,p){r&1&&(i(0,"small",27),l(1,"City is required"),t())}function Ye(r,p){r&1&&(i(0,"small",27),l(1,"State is required"),t())}function Je(r,p){r&1&&(i(0,"small",27),l(1,"Country is required"),t())}function Ke(r,p){r&1&&(i(0,"small",27),l(1,"Zip Code is required"),t())}function Xe(r,p){r&1&&(i(0,"small",27),l(1,"First Name is required"),t())}function et(r,p){r&1&&(i(0,"small",27),l(1,"Last Name is required"),t())}function tt(r,p){r&1&&(i(0,"small",27),l(1,"Phone is required"),t())}function rt(r,p){r&1&&(i(0,"small",27),l(1,"Email is required"),t())}var Et=(()=>{let p=class p{constructor(a,n,e,s,_,U){this.authService=a,this.crudService=n,this.fb=e,this.alertService=s,this.router=_,this.activeRoute=U,this.PropertyTypes=["Villa","Hotel","Resort"],this.propertyUnitId="ADD"}ngOnInit(){this.userInfo=this.authService.getUserInfo()?.user,this.propertyUnitId=this.activeRoute.snapshot.paramMap.get("propertyUnitId"),this.propertyUnitForm=this.fb.group({propertyUnitName:["",[u.required,v.noLeadingSpace]],propertyUnitLegalName:["",[u.required]],propertyUnitType:["Hotel",[u.required]],description:["",[u.required]],website:[""],propertyAddress:this.fb.group({addressLine1:["",[u.required]],addressLine2:[""],city:["",[u.required,v.noLeadingSpace]],state:["",[u.required,u.pattern(/^[A-Za-z\s]+$/),v.noLeadingSpace]],country:["",[u.required]],zipCode:["",[u.required,v.zipCodeValidator]]}),managerDetails:this.fb.group({firstName:["",[u.required,v.noLeadingSpace,u.minLength(2)]],lastName:["",[u.required,v.noLeadingSpace,u.minLength(2)]],phone:["",[u.required]],email:["",[u.required,u.email]]})}),this.propertyUnitId!="ADD"&&this.crudService.post($.READ_PROPERTY_UNIT+this.propertyUnitId,{}).then(a=>{console.log(a),this.propertyUnitForm.reset(a.data)}).catch(a=>{this.alertService.errorAlert(a.message)})}onSubmit(){if(this.propertyUnitForm.valid){console.log(this.propertyUnitForm.value);let a=this.propertyUnitForm.value;a.propertyId=this.userInfo.propertyId,this.propertyUnitId=="ADD"?this.crudService.post($.CREATE_PROPERTY_UNIT,a).then(n=>{console.log(n),this.alertService.successAlert(n.message),this.router.navigate(["/roomtype-setup/"+n?.data?._id+"/ADD"])}).catch(n=>{this.alertService.errorAlert(n?.error?.message)}):this.crudService.post($.UPDATE_PROPERTY_UNIT+this.propertyUnitId,a).then(n=>{console.log(n),this.alertService.successAlert(n.message),this.router.navigate(["/rooms-review",this.propertyUnitId])}).catch(n=>{this.alertService.errorAlert(n.message)})}else this.propertyUnitForm.markAllAsTouched()}getfile(a){if(a.length>0){let n=new FormData;a.forEach(e=>n.append("file",e,e.name)),this.crudService.post($.UPLOAD_ROOMS_PHOTOS,n,{skipLoader:!0}).then(e=>{this.fileUploadComponent.clearFiles(),this.alertService.successAlert(e.message)}).catch(e=>{this.alertService.errorAlert(e.message)})}}};p.\u0275fac=function(n){return new(n||p)(F(he),F(Ue),F(we),F(Fe),F(fe),F(ge))},p.\u0275cmp=B({type:p,selectors:[["app-add-update-property"]],viewQuery:function(n,e){if(n&1&&oe(ze,5),n&2){let s;pe(s=ae())&&(e.fileUploadComponent=s.first)}},standalone:!0,features:[K],decls:88,vars:55,consts:[[1,"container","container_form","my-3","rounded"],[1,"row","row-cols-1","row-cols-md-2",3,"ngSubmit","formGroup"],[1,"col","mt-3"],[1,"form-label"],["type","text","formControlName","propertyUnitName","placeholder","Enter Property Unit Name",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","propertyUnitLegalName","placeholder","Enter Property Unit Legal Name",1,"form-control",3,"ngClass"],["id","options","formControlName","propertyUnitType",1,"form-control",2,"appearance","auto"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","description","placeholder","Enter Description",1,"form-control",3,"ngClass"],["type","text","formControlName","website","placeholder","Enter Website",1,"form-control",3,"ngClass"],[1,"col-md-12","mt-4"],[1,"form-label","fw-semibold"],["formGroupName","propertyAddress",1,"col","mt-3"],["type","text","formControlName","addressLine1","placeholder","Enter Address Line 1",1,"form-control",3,"ngClass"],["type","text","formControlName","addressLine2","placeholder","Enter Address Line 2",1,"form-control"],["type","text","formControlName","city","placeholder","Enter City",1,"form-control",3,"ngClass"],["type","text","formControlName","state","placeholder","Enter State",1,"form-control",3,"ngClass"],["type","text","formControlName","country","placeholder","Enter Country",1,"form-control",3,"ngClass"],["type","text","formControlName","zipCode","placeholder","Enter Zip Code",1,"form-control",3,"ngClass"],["formGroupName","managerDetails",1,"col","mt-3"],["type","text","formControlName","firstName","placeholder","Enter  First Name",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName","placeholder","Enter  Last Name",1,"form-control",3,"ngClass"],["type","text","formControlName","phone","placeholder","Enter  Phone",1,"form-control",3,"ngClass"],["type","text","formControlName","email","placeholder","Enter  Email",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mb-3"],[1,"text-danger"],[3,"value"]],template:function(n,e){if(n&1&&(i(0,"div",0)(1,"form",1),h("ngSubmit",function(){return e.onSubmit()}),i(2,"div",2)(3,"label",3),l(4,"Property Unit Name"),t(),y(5,"input",4),d(6,je,2,0,"small",5),t(),i(7,"div",2)(8,"label",3),l(9,"Property Unit Legal Name"),t(),y(10,"input",6),d(11,Ge,2,0,"small",5),t(),i(12,"div",2)(13,"label",3),l(14,"Property Unit Type"),t(),i(15,"div")(16,"select",7),d(17,Ze,2,2,"option",8),t()(),d(18,Qe,2,0,"small",5),t(),i(19,"div",2)(20,"label",3),l(21,"Description"),t(),y(22,"input",9),d(23,$e,2,0,"small",5),t(),i(24,"div",2)(25,"label",3),l(26,"Website"),t(),y(27,"input",10),d(28,Be,2,0,"small",5),t(),i(29,"div",11)(30,"label",12),l(31,"Property Address"),t()(),i(32,"div",13)(33,"label",3),l(34,"Address Line 1"),t(),y(35,"input",14),d(36,He,2,0,"small",5),t(),i(37,"div",13)(38,"label",3),l(39,"Address Line 2"),t(),y(40,"input",15),t(),i(41,"div",13)(42,"label",3),l(43,"City"),t(),y(44,"input",16),d(45,We,2,0,"small",5),t(),i(46,"div",13)(47,"label",3),l(48,"State"),t(),y(49,"input",17),d(50,Ye,2,0,"small",5),t(),i(51,"div",13)(52,"label",3),l(53,"Country"),t(),y(54,"input",18),d(55,Je,2,0,"small",5),t(),i(56,"div",13)(57,"label",3),l(58,"Zip Code"),t(),y(59,"input",19),d(60,Ke,2,0,"small",5),t(),i(61,"div",11)(62,"label",12),l(63,"Manager Details"),t()(),i(64,"div",20)(65,"label",3),l(66," First Name"),t(),y(67,"input",21),d(68,Xe,2,0,"small",5),t(),i(69,"div",20)(70,"label",3),l(71," Last Name"),t(),y(72,"input",22),d(73,et,2,0,"small",5),t(),i(74,"div",20)(75,"label",3),l(76," Phone"),t(),y(77,"input",23),d(78,tt,2,0,"small",5),t(),i(79,"div",20)(80,"label",3),l(81," Email"),t(),y(82,"input",24),d(83,rt,2,0,"small",5),t(),i(84,"div",11)(85,"div",25)(86,"button",26),l(87,"Next"),t()()()()()),n&2){let s,_,U,C,E,S,A,N,b,D,P,T,w,I,L,q,O,z,M,R,V,k,x,j,G,Z,Q;o(),m("formGroup",e.propertyUnitForm),o(4),m("ngClass",c(29,g,(((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.dirty)||((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.touched))&&((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.invalid))),o(),m("ngIf",(((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.dirty)||((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.touched))&&((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.invalid)),o(4),m("ngClass",c(31,g,(((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.dirty)||((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.touched))&&((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.invalid))),o(),m("ngIf",(((C=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:C.dirty)||((C=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:C.touched))&&((C=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:C.invalid)),o(6),m("ngForOf",e.PropertyTypes),o(),m("ngIf",(((E=e.propertyUnitForm.get("propertyUnitType"))==null?null:E.dirty)||((E=e.propertyUnitForm.get("propertyUnitType"))==null?null:E.touched))&&((E=e.propertyUnitForm.get("propertyUnitType"))==null?null:E.invalid)),o(4),m("ngClass",c(33,g,(((S=e.propertyUnitForm.get("description"))==null?null:S.dirty)||((S=e.propertyUnitForm.get("description"))==null?null:S.touched))&&((S=e.propertyUnitForm.get("description"))==null?null:S.invalid))),o(),m("ngIf",(((A=e.propertyUnitForm.get("description"))==null?null:A.dirty)||((A=e.propertyUnitForm.get("description"))==null?null:A.touched))&&((A=e.propertyUnitForm.get("description"))==null?null:A.invalid)),o(4),m("ngClass",c(35,g,(((N=e.propertyUnitForm.get("website"))==null?null:N.dirty)||((N=e.propertyUnitForm.get("website"))==null?null:N.touched))&&((N=e.propertyUnitForm.get("website"))==null?null:N.invalid))),o(),m("ngIf",(((b=e.propertyUnitForm.get("website"))==null?null:b.dirty)||((b=e.propertyUnitForm.get("website"))==null?null:b.touched))&&((b=e.propertyUnitForm.get("website"))==null?null:b.invalid)),o(7),m("ngClass",c(37,g,(((D=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:D.dirty)||((D=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:D.touched))&&((D=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:D.invalid))),o(),m("ngIf",(((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.dirty)||((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.touched))&&((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.invalid)),o(8),m("ngClass",c(39,g,(((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.dirty)||((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.touched))&&((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.invalid))),o(),m("ngIf",(((w=e.propertyUnitForm.get("propertyAddress.city"))==null?null:w.dirty)||((w=e.propertyUnitForm.get("propertyAddress.city"))==null?null:w.touched))&&((w=e.propertyUnitForm.get("propertyAddress.city"))==null?null:w.invalid)),o(4),m("ngClass",c(41,g,(((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.dirty)||((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.touched))&&((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.invalid))),o(),m("ngIf",(((L=e.propertyUnitForm.get("propertyAddress.state"))==null?null:L.dirty)||((L=e.propertyUnitForm.get("propertyAddress.state"))==null?null:L.touched))&&((L=e.propertyUnitForm.get("propertyAddress.state"))==null?null:L.invalid)),o(4),m("ngClass",c(43,g,(((q=e.propertyUnitForm.get("propertyAddress.country"))==null?null:q.dirty)||((q=e.propertyUnitForm.get("propertyAddress.country"))==null?null:q.touched))&&((q=e.propertyUnitForm.get("propertyAddress.country"))==null?null:q.invalid))),o(),m("ngIf",(((O=e.propertyUnitForm.get("propertyAddress.country"))==null?null:O.dirty)||((O=e.propertyUnitForm.get("propertyAddress.country"))==null?null:O.touched))&&((O=e.propertyUnitForm.get("propertyAddress.country"))==null?null:O.invalid)),o(4),m("ngClass",c(45,g,(((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.dirty)||((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.touched))&&((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.invalid))),o(),m("ngIf",(((M=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:M.dirty)||((M=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:M.touched))&&((M=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:M.invalid)),o(7),m("ngClass",c(47,g,(((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.dirty)||((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.touched))&&((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.invalid))),o(),m("ngIf",(((V=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:V.dirty)||((V=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:V.touched))&&((V=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:V.invalid)),o(4),m("ngClass",c(49,g,(((k=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:k.dirty)||((k=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:k.touched))&&((k=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:k.invalid))),o(),m("ngIf",(((x=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:x.dirty)||((x=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:x.touched))&&((x=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:x.invalid)),o(4),m("ngClass",c(51,g,(((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.dirty)||((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.touched))&&((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.invalid))),o(),m("ngIf",(((G=e.propertyUnitForm.get("managerDetails.phone"))==null?null:G.dirty)||((G=e.propertyUnitForm.get("managerDetails.phone"))==null?null:G.touched))&&((G=e.propertyUnitForm.get("managerDetails.phone"))==null?null:G.invalid)),o(4),m("ngClass",c(53,g,(((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.dirty)||((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.touched))&&((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.invalid))),o(),m("ngIf",(((Q=e.propertyUnitForm.get("managerDetails.email"))==null?null:Q.dirty)||((Q=e.propertyUnitForm.get("managerDetails.email"))==null?null:Q.touched))&&((Q=e.propertyUnitForm.get("managerDetails.email"))==null?null:Q.invalid))}},dependencies:[ce,de,ue,ye,_e,Ie,Se,Pe,Te,ve,De,Ce,Ee,Le,Ae,be,Ne,X],styles:[".form-label[_ngcontent-%COMP%]{margin-bottom:0}.form-control.is-invalid[_ngcontent-%COMP%]{background-image:none;padding-right:.375rem .75rem}.container_form[_ngcontent-%COMP%]{background:#00000023}"]});let r=p;return r})();export{Et as AddUpdatePropertyComponent};

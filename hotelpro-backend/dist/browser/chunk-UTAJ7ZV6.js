import{a as q}from"./chunk-CQ2JGBPF.js";import{r as z,s as G,x as H,y as V,z as $}from"./chunk-VIVXY5RX.js";import{b as P}from"./chunk-SWGOWEHE.js";import{Aa as w,Ca as S,Da as C,Db as O,Fb as T,Gb as F,Ib as k,Jb as B,L as g,Lb as U,Ma as i,Mb as j,Na as m,Pa as R,T as y,U as E,Xa as M,bb as v,cb as D,db as x,ea as a,fa as d,la as f,na as u,ob as N,pb as L,tb as b,wa as e,wb as A,xa as t,ya as _,za as I}from"./chunk-CWTEAQ4G.js";function K(l,s){if(l&1&&(e(0,"tr",27)(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),v(13,"status"),t(),e(14,"td"),i(15),v(16,"date"),t(),e(17,"td"),i(18),v(19,"date"),t()()),l&2){let c=C(),n=c.$implicit,r=c.index;u("routerLink","/guest-folio/"+n.groupId),a(2),m(r+1),a(2),R(" ",n.firstName," ",n.lastName," "),a(2),m(n.confirmationNumber),a(2),m(n.roomType),a(2),m(n.roomName),a(2),m(D(13,10,n.reservationStatus)),a(3),m(x(16,12,n.arrival,"dd/MM/yyyy")),a(3),m(x(19,15,n.departure,"dd/MM/yyyy"))}}function Q(l,s){if(l&1&&(I(0),f(1,K,20,18,"tr",26),w()),l&2){let c=s.$implicit;a(),u("ngIf",c.Show)}}var se=(()=>{let s=class s{constructor(n,r,o,h,p,J){this.crudService=n,this.fb=r,this.alertService=o,this.activeRoute=h,this.router=p,this.authService=J,this.propertyUnitId="",this.reservationData=[]}ngOnInit(){this.propertyUnitId=this.authService.getUserInfo()?.user?.propertyUnitId,this.today=new Date,this.today.setUTCHours(0,0,0,0),this.fetchData()}fetchData(){this.crudService.post(B.GET_ALL_RESERVATION,{propertyUnitId:this.propertyUnitId}).then(n=>{this.reservationData=n.data}).catch(n=>{this.alertService.errorAlert(n?.error?.message||"An error occurred while fetching users"),console.error(n)})}search(n){this.reservationData.forEach(r=>{JSON.stringify(r)?.toLowerCase()?.includes(n.target.value.toLowerCase())?r.Show=!0:r.Show=!1})}filterByReservationStatus(n){let r=n.target.value;for(let o of this.reservationData)o.Show=!1,r=="all"?o.Show=!0:r=="arrival"?o.reservationStatus=="reserved"&&new Date(o.arrival).toString()==this.today.toString()&&(o.Show=!0):r=="departure"?o.reservationStatus=="inhouse"&&new Date(o.departure).toString()==this.today.toString()&&(o.Show=!0):o.reservationStatus==r&&(o.Show=!0)}};s.\u0275fac=function(r){return new(r||s)(d(U),d(H),d(j),d(O),d(T),d(P))},s.\u0275cmp=g({type:s,selectors:[["app-reservation-list"]],standalone:!0,features:[M],decls:55,vars:1,consts:[[1,"container-fluid","my-4"],[1,"d-flex"],[1,"input_container"],["type","text","placeholder","Search",1,"form-control","field","search",3,"input"],[1,"input_img"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-search"],["d","M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"],[1,"ms-4","d-flex","align-items-center"],[1,"ms-1"],["id","options",1,"form-control",2,"appearance","auto",3,"change"],["value","all"],["value","arrival"],["value","departure"],["value","inhouse"],["value","reserved"],["value","cancelled"],["value","checkedout"],["value","noshow"],[1,"row","my-3"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table","text-center"],["scope","col"],[4,"ngFor","ngForOf"],["style","cursor: pointer",3,"routerLink",4,"ngIf"],[2,"cursor","pointer",3,"routerLink"]],template:function(r,o){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),S("input",function(p){return o.search(p)}),t(),e(4,"div",4),y(),e(5,"svg",5),_(6,"path",6),t()()(),E(),e(7,"div",7)(8,"div"),i(9,"Filter :"),t(),e(10,"div",8)(11,"select",9),S("change",function(p){return o.filterByReservationStatus(p)}),e(12,"option",10),i(13,"All"),t(),e(14,"option",11),i(15,"Arrival"),t(),e(16,"option",12),i(17,"Departure"),t(),e(18,"option",13),i(19,"In house"),t(),e(20,"option",14),i(21,"Reservation"),t(),e(22,"option",15),i(23,"Cancellation"),t(),e(24,"option",16),i(25,"Checked out"),t(),e(26,"option",17),i(27,"No show"),t()()()()(),e(28,"div",18)(29,"div",19)(30,"div",20)(31,"div",21),i(32,"Reservation"),t(),e(33,"div",22)(34,"table",23)(35,"thead")(36,"tr")(37,"th",24),i(38,"No."),t(),e(39,"th",24),i(40,"Name"),t(),e(41,"th",24),i(42,"Confirmation No."),t(),e(43,"th",24),i(44,"Room Type"),t(),e(45,"th",24),i(46,"Room No."),t(),e(47,"th",24),i(48,"Status"),t(),e(49,"th",24),i(50,"Arrival"),t(),e(51,"th",24),i(52,"Departure"),t()()(),e(53,"tbody"),f(54,Q,2,1,"ng-container",25),t()()()()()()()),r&2&&(a(54),u("ngForOf",o.reservationData))},dependencies:[A,N,L,b,V,z,G,$,k,F,q],styles:[".field[_ngcontent-%COMP%]{font-weight:400!important;color:#000!important;font-size:16px}.input_container[_ngcontent-%COMP%]{position:relative}.input_img[_ngcontent-%COMP%]{position:absolute;bottom:2px;top:4px;right:10px;width:17px;height:17px;opacity:.5}"]});let l=s;return l})();export{se as ReservationListComponent};

import{b as k}from"./chunk-SWGOWEHE.js";import{Ba as E,Ca as u,Da as y,Fb as P,Jb as U,L as _,Lb as w,Ma as i,Mb as A,Na as c,Oa as C,R as v,S as b,T as f,Xa as I,ea as l,fa as p,ta as S,ua as g,va as x,wa as e,xa as t,ya as D}from"./chunk-CWTEAQ4G.js";function T(d,o){if(d&1){let m=E();e(0,"tr")(1,"th",16),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td")(8,"button",17),u("click",function(){let a=v(m).$implicit,r=y();return b(r.editPropertyUnit(a._id))}),i(9,"Edit"),t()(),e(10,"td",18),f(),e(11,"svg",19),u("click",function(){let a=v(m).$implicit,r=y();return b(r.manageUser(a._id))}),D(12,"path",20),t()()()}if(d&2){let m=o.$implicit,n=o.$index;l(2),c(n+1),l(2),c(m.propertyUnitName),l(2),c(m.active?"Active":"Deactive")}}var N=(()=>{let o=class o{constructor(n,a,r,s){this.authService=n,this.router=a,this.crudService=r,this.alertService=s,this.activePropertyUnit=0}ngOnInit(){this.userInfo=this.authService.getUserInfo()?.user,console.log(this.userInfo);let n={};this.userInfo.userType=="manager"?n={accessPropertyUnitIds:this.userInfo.accessPropertyUnitIds}:n={propertyId:this.userInfo.propertyId},this.crudService.post(U.READ_CLIENT_DASHBOARD,n).then(a=>{this.dashboardData=a.data;for(let r of this.dashboardData?.property?.propertyUnits)this.activePropertyUnit+=r.active==!0?1:0;console.log(this.dashboardData)}).catch(a=>{this.alertService.errorAlert(a?.error?.message||a.message)})}addPropertyUnit(){this.router.navigate(["/property-setup/ADD"])}editPropertyUnit(n){this.router.navigate(["/property-setup",n])}manageUser(n){this.router.navigate(["/manage-user",n])}};o.\u0275fac=function(a){return new(a||o)(p(k),p(P),p(w),p(A))},o.\u0275cmp=_({type:o,selectors:[["app-client-dashboard"]],standalone:!0,features:[I],decls:58,vars:3,consts:[[1,"container-fluid","my-4"],[1,"row"],[1,"col-lg-3","col-md-6","mb-4"],[1,"card","shadow"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"row","mb-4"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"table","table-striped","text-center"],["scope","col"],[1,"col-12","text-center"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-danger","mx-2"],["scope","row"],[1,"btn","btn-secondary","btn-sm",3,"click"],[2,"text-align","center"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person",2,"cursor","pointer",3,"click"],["d","M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"]],template:function(a,r){if(a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),i(6,"Total Properties"),t(),e(7,"p",6),i(8),t()()()(),e(9,"div",2)(10,"div",3)(11,"div",4)(12,"h5",5),i(13,"Active Properties"),t(),e(14,"p",6),i(15),t()()()(),e(16,"div",2)(17,"div",3)(18,"div",4)(19,"h5",5),i(20,"Total Rooms"),t(),e(21,"p",6),i(22),t()()()(),e(23,"div",2)(24,"div",3)(25,"div",4)(26,"h5",5),i(27,"Today's Revenue"),t(),e(28,"p",6),i(29," - "),t()()()()(),e(30,"div",7)(31,"div",8)(32,"div",9)(33,"div",10),i(34," Property Units "),t(),e(35,"div",4)(36,"table",11)(37,"thead")(38,"tr")(39,"th",12),i(40,"No."),t(),e(41,"th",12),i(42,"Property Unit Name"),t(),e(43,"th",12),i(44,"Status"),t(),e(45,"th",12),i(46,"Actions"),t(),e(47,"th",12),i(48,"Manage User"),t()()(),e(49,"tbody"),g(50,T,13,3,"tr",null,S),t()()()()()(),e(52,"div",1)(53,"div",13)(54,"button",14),u("click",function(){return r.addPropertyUnit()}),i(55,"Add Property"),t(),e(56,"button",15),i(57,"Subscribe"),t()()()()),a&2){let s,h;l(8),c((s=r.dashboardData==null||r.dashboardData.property==null||r.dashboardData.property.propertyUnits==null?null:r.dashboardData.property.propertyUnits.length)!==null&&s!==void 0?s:0),l(7),c(r.activePropertyUnit),l(7),C(" ",(h=r.dashboardData==null||r.dashboardData.rooms==null?null:r.dashboardData.rooms.totalRooms)!==null&&h!==void 0?h:0," "),l(28),x(r.dashboardData==null||r.dashboardData.property==null?null:r.dashboardData.property.propertyUnits)}},styles:["body[_ngcontent-%COMP%]{background-color:#f8f9fa}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem}.card-header[_ngcontent-%COMP%]{font-weight:700}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]});let d=o;return d})();export{N as ClientDashboardComponent};

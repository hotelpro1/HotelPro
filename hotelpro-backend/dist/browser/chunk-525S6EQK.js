import{b as T}from"./chunk-SWGOWEHE.js";import{Ba as C,Ca as u,Da as f,Fb as P,Jb as w,L as S,Lb as A,Ma as n,Mb as k,Na as c,Oa as _,R as b,S as y,T as g,Xa as U,ea as l,fa as m,ta as x,ua as D,va as E,wa as e,xa as i,ya as I}from"./chunk-CWTEAQ4G.js";function M(d,o){if(d&1){let p=C();e(0,"tr")(1,"th",16),n(2),i(),e(3,"td"),n(4),i(),e(5,"td"),n(6),i(),e(7,"td")(8,"button",17),u("click",function(){let a=b(p).$implicit,t=f();return y(t.editPropertyUnit(a._id))}),n(9,"Edit"),i()(),e(10,"td",18),g(),e(11,"svg",19),u("click",function(){let a=b(p).$implicit,t=f();return y(t.manageUser(a._id))}),I(12,"path",20),i()()()}if(d&2){let p=o.$implicit,r=o.$index;l(2),c(r+1),l(2),c(p.propertyUnitName),l(2),c(p.active?"Active":"Deactive")}}var $=(()=>{let o=class o{constructor(r,a,t,s){this.authService=r,this.router=a,this.crudService=t,this.alertService=s,this.activePropertyUnit=0}ngOnInit(){this.userInfo=this.authService.getUserInfo()?.user,console.log(this.userInfo);let r={};this.userInfo.userType=="manager"?r={accessPropertyUnitIds:this.userInfo.accessPropertyUnitIds}:r={propertyId:this.userInfo.propertyId},this.crudService.post(w.READ_CLIENT_DASHBOARD,r).then(a=>{this.dashboardData=a.data;for(let t of this.dashboardData?.property?.propertyUnits)this.activePropertyUnit+=t.active==!0?1:0;console.log(this.dashboardData)}).catch(a=>{this.alertService.errorAlert(a?.error?.message||a.message)})}addPropertyUnit(){this.router.navigate(["/property-setup/ADD"])}editPropertyUnit(r){this.router.navigate(["/property-setup",r])}manageUser(r){this.router.navigate(["/manage-user",r])}};o.\u0275fac=function(a){return new(a||o)(m(T),m(P),m(A),m(k))},o.\u0275cmp=S({type:o,selectors:[["app-client-dashboard"]],standalone:!0,features:[U],decls:58,vars:4,consts:[[1,"container-fluid","my-4"],[1,"row"],[1,"col-lg-3","col-md-6","mb-4"],[1,"card","shadow"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"row","mb-4"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"table","table-striped","text-center"],["scope","col"],[1,"col-12","text-center"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-danger","mx-2"],["scope","row"],[1,"btn","btn-secondary","btn-sm",3,"click"],[2,"text-align","center"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person",2,"cursor","pointer",3,"click"],["d","M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"]],template:function(a,t){if(a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),n(6,"Total Properties"),i(),e(7,"p",6),n(8),i()()()(),e(9,"div",2)(10,"div",3)(11,"div",4)(12,"h5",5),n(13,"Active Properties"),i(),e(14,"p",6),n(15),i()()()(),e(16,"div",2)(17,"div",3)(18,"div",4)(19,"h5",5),n(20,"Total Rooms"),i(),e(21,"p",6),n(22),i()()()(),e(23,"div",2)(24,"div",3)(25,"div",4)(26,"h5",5),n(27,"Total staff"),i(),e(28,"p",6),n(29),i()()()()(),e(30,"div",7)(31,"div",8)(32,"div",9)(33,"div",10),n(34," Property Units "),i(),e(35,"div",4)(36,"table",11)(37,"thead")(38,"tr")(39,"th",12),n(40,"No."),i(),e(41,"th",12),n(42,"Property Unit Name"),i(),e(43,"th",12),n(44,"Status"),i(),e(45,"th",12),n(46,"Actions"),i(),e(47,"th",12),n(48,"Manage User"),i()()(),e(49,"tbody"),D(50,M,13,3,"tr",null,x),i()()()()()(),e(52,"div",1)(53,"div",13)(54,"button",14),u("click",function(){return t.addPropertyUnit()}),n(55,"Add Property"),i(),e(56,"button",15),n(57,"Subscribe"),i()()()()),a&2){let s,h,v;l(8),c((s=t.dashboardData==null||t.dashboardData.property==null||t.dashboardData.property.propertyUnits==null?null:t.dashboardData.property.propertyUnits.length)!==null&&s!==void 0?s:0),l(7),c(t.activePropertyUnit),l(7),_(" ",(h=t.dashboardData==null||t.dashboardData.rooms==null?null:t.dashboardData.rooms.totalRooms)!==null&&h!==void 0?h:0," "),l(7),_(" ",(v=t.dashboardData==null||t.dashboardData.users==null?null:t.dashboardData.users.totalUsers)!==null&&v!==void 0?v:0," "),l(21),E(t.dashboardData==null||t.dashboardData.property==null?null:t.dashboardData.property.propertyUnits)}},styles:["body[_ngcontent-%COMP%]{background-color:#f8f9fa}.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem}.card-header[_ngcontent-%COMP%]{font-weight:700}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]});let d=o;return d})();export{$ as ClientDashboardComponent};

import{a as Le,b as xe,c as K}from"./chunk-CFB56TVD.js";import{a as qe}from"./chunk-B2VF6USO.js";import{a as C}from"./chunk-MSXCR3QF.js";import{c as ve,d as c,e as he,f as Fe,k as Ce,m as Ee,n as Se,p as Ae,q as Ne,r as be,s as Pe,w as De,x as Te,y as Ie,z as we}from"./chunk-DKI4PBNW.js";import{b as Ue}from"./chunk-3FS5RTN6.js";import{Ba as B,Ca as v,Da as F,Db as ye,Fb as ce,Ia as ne,Ja as le,Jb as ge,Ka as oe,Kb as H,L as Y,Ma as o,Mb as fe,Na as pe,Nb as _e,Oa as ae,R as Q,S as $,Xa as J,Z as X,Za as g,aa as ee,ea as p,fa as h,la as d,na as m,nb as me,ob as de,pb as se,sa as W,ta as te,ua as re,va as ie,wa as n,wb as ue,xa as t,ya as y}from"./chunk-W7CJDNGE.js";function Re(r,a){if(r&1){let u=B();n(0,"button",6),v("click",function(){let i=Q(u).openFileSelector;return $(i())}),o(1," Select "),t()}}function Ve(r,a){if(r&1){let u=B();n(0,"div",3),y(1,"img",7),n(2,"i",8),v("click",function(){let i=Q(u).$index,e=F();return $(e.removeFile(i))}),o(3," cancel "),t()()}if(r&2){let u=a.$implicit;p(),m("src",u,ee)}}function Me(r,a){if(r&1&&(n(0,"div",4),o(1),t()),r&2){let u=F();p(),pe(u.fileError)}}function ke(r,a){if(r&1){let u=B();n(0,"button",9),v("click",function(){Q(u);let i=F();return $(i.uploadFiles())}),o(1,"Upload"),t()}}var ze=(()=>{let a=class a{constructor(){this.multiple=!0,this.acceptTypes=".jpg, .jpeg, .png, .JPG, .JPEG, .PNG",this.maxFileSize=2e6,this.onUpload=new X,this.fileError="",this.filePreviews=[],this.files=[]}droppedFiles(l){if(this.clearErrors(),!this.multiple&&l.length>1){this.fileError="Only one file is allowed.";return}this.files=[],this.filePreviews=[];for(let i of l)i.fileEntry.isFile&&this.isFileAllowed(i.fileEntry.name)?i.fileEntry.file(s=>{this.isFileSizeAllowed(s.size)?(this.files.push(s),this.generatePreview(s)):this.fileError="Max size of a file allowed is 2 MB."}):this.fileError="Only files in '.jpg', '.jpeg', '.png' format are accepted."}isFileAllowed(l){let i=this.acceptTypes.split(",").map(s=>s.trim()),e=l.substring(l.lastIndexOf(".")).toLowerCase();return i.includes(e)}isFileSizeAllowed(l){return l<=this.maxFileSize}generatePreview(l){let i=new FileReader;i.onload=e=>{this.filePreviews.push(e.target.result)},i.readAsDataURL(l)}removeFile(l){this.filePreviews.splice(l,1),this.files.splice(l,1)}uploadFiles(){if(this.files.length===0){this.fileError="No files to upload.";return}this.onUpload.emit(this.files)}clearErrors(){this.fileError=""}clearFiles(){this.filePreviews=[],this.files=[]}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=Y({type:a,selectors:[["app-file-upload"]],inputs:{multiple:"multiple",acceptTypes:"acceptTypes",maxFileSize:"maxFileSize"},outputs:{onUpload:"onUpload"},standalone:!0,features:[J],decls:7,vars:4,consts:[["dropZoneClassName","my-style","contentClassName","my-style",3,"onFileDrop","accept","multiple"],["ngx-file-drop-content-tmp",""],[1,"d-flex"],[2,"position","relative"],[1,"error"],[1,"btn","btn-primary","mt-3"],["type","button",1,"btn","btn-primary",3,"click"],["alt","File Preview",2,"width","300px","height","200px",3,"src"],[1,"material-symbols-rounded","text-danger",2,"position","absolute","right","4px","background","white","cursor","pointer",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(i,e){i&1&&(n(0,"ngx-file-drop",0),v("onFileDrop",function(_){return e.droppedFiles(_)}),d(1,Re,2,0,"ng-template",1),t(),n(2,"div",2),re(3,Ve,4,1,"div",3,te),t(),d(5,Me,2,1,"div",4)(6,ke,2,0,"button",5)),i&2&&(m("accept",e.acceptTypes)("multiple",e.multiple),p(3),ie(e.filePreviews),p(2),W(5,e.fileError?5:-1),p(),W(6,!e.fileError&&e.files.length>0?6:-1))},dependencies:[K,xe,Le]});let r=a;return r})();var f=r=>({"is-invalid":r});function je(r,a){r&1&&(n(0,"small",31),o(1,"Property Unit Name is required"),t())}function Ge(r,a){r&1&&(n(0,"small",31),o(1,"Property Unit Legal Name is required"),t())}function Ze(r,a){if(r&1&&(n(0,"option",32),o(1),t()),r&2){let u=a.$implicit;m("value",u),p(),ae(" ",u," ")}}function Qe(r,a){r&1&&(n(0,"small",31),o(1,"Property Unit Type is required"),t())}function $e(r,a){r&1&&(n(0,"small",31),o(1,"Description is required"),t())}function Be(r,a){r&1&&(n(0,"small",31),o(1,"Address Line 1 is required"),t())}function He(r,a){r&1&&(n(0,"small",31),o(1,"City is required"),t())}function Ye(r,a){r&1&&(n(0,"small",31),o(1,"State is required"),t())}function Je(r,a){r&1&&(n(0,"small",31),o(1,"Country is required"),t())}function Ke(r,a){r&1&&(n(0,"small",31),o(1,"ZIP Code is required. "),y(2,"br"),t())}function We(r,a){r&1&&(n(0,"small",31),o(1,"ZIP Code must be 6-8 digits long"),t())}function Xe(r,a){if(r&1&&(n(0,"div"),d(1,Ke,3,0,"small",7)(2,We,2,0,"small",7),t()),r&2){let u,l,i=F();p(),m("ngIf",(u=i.propertyUnitForm.get("propertyAddress.zipCode"))==null||u.errors==null?null:u.errors.required),p(),m("ngIf",(l=i.propertyUnitForm.get("propertyAddress.zipCode"))==null||l.errors==null?null:l.errors.zipCode)}}function et(r,a){r&1&&(n(0,"small",31),o(1,"First Name is required"),t())}function tt(r,a){r&1&&(n(0,"small",31),o(1,"Last Name is required"),t())}function rt(r,a){r&1&&(n(0,"small",31),o(1,"Phone is required"),t())}function it(r,a){r&1&&(n(0,"small",31),o(1,"Email is required"),t())}function nt(r,a){if(r&1){let u=B();n(0,"button",33),v("click",function(){Q(u);let i=F();return $(i.navigateToRoomSetup())}),o(1,"Next"),t()}}var Nt=(()=>{let a=class a{constructor(l,i,e,s,_,U){this.authService=l,this.crudService=i,this.fb=e,this.alertService=s,this.router=_,this.activeRoute=U,this.PropertyTypes=["Villa","Hotel","Resort"],this.propertyUnitId="ADD"}ngOnInit(){this.userInfo=this.authService.getUserInfo()?.user,this.propertyUnitId=this.activeRoute.snapshot.paramMap.get("propertyUnitId"),this.propertyUnitForm=this.fb.group({propertyUnitName:["",[c.required,C.noLeadingSpace]],propertyUnitLegalName:["",[c.required]],propertyUnitType:["Hotel",[c.required]],description:[""],website:[""],propertyAddress:this.fb.group({addressLine1:["",[c.required]],addressLine2:[""],city:["",[c.required,C.noLeadingSpace]],state:["",[c.required,c.pattern(/^[A-Za-z\s]+$/),C.noLeadingSpace]],country:["",[c.required]],zipCode:["",[c.required,C.zipCodeValidator]]}),managerDetails:this.fb.group({firstName:["",[c.required,C.noLeadingSpace]],lastName:["",[c.required,C.noLeadingSpace]],phone:["",[c.required,c.minLength(10)]],email:["",[c.required,c.email]]})}),this.propertyUnitId!="ADD"&&this.crudService.post(H.READ_PROPERTY_UNIT+this.propertyUnitId,{}).then(l=>{console.log(l),this.propertyUnitForm.reset(l.data)}).catch(l=>{this.alertService.errorAlert(l.message)})}onSubmit(){if(this.propertyUnitForm.valid){console.log(this.propertyUnitForm.value);let l=this.propertyUnitForm.value;l.propertyId=this.userInfo.propertyId,this.propertyUnitId=="ADD"?this.crudService.post(H.CREATE_PROPERTY_UNIT,l).then(i=>{console.log(i),this.alertService.successAlert(i.message),this.propertyUnitId=i?.data?._id}).catch(i=>{this.alertService.errorAlert(i?.error?.message)}):this.crudService.post(H.UPDATE_PROPERTY_UNIT+this.propertyUnitId,l).then(i=>{console.log(i),this.alertService.successAlert(i.message)}).catch(i=>{this.alertService.errorAlert(i.message)})}else this.propertyUnitForm.markAllAsTouched()}navigateToRoomSetup(){this.router.navigate(["/rooms-review/"+this.propertyUnitId])}getfile(l){if(l.length>0){let i=new FormData;l.forEach(e=>i.append("file",e,e.name)),this.crudService.post(H.UPLOAD_ROOMS_PHOTOS,i,{skipLoader:!0}).then(e=>{this.fileUploadComponent.clearFiles(),this.alertService.successAlert(e.message)}).catch(e=>{this.alertService.errorAlert(e.message)})}}};a.\u0275fac=function(i){return new(i||a)(h(Ue),h(fe),h(Te),h(_e),h(ce),h(ye))},a.\u0275cmp=Y({type:a,selectors:[["app-add-update-property"]],viewQuery:function(i,e){if(i&1&&ne(ze,5),i&2){let s;le(s=oe())&&(e.fileUploadComponent=s.first)}},standalone:!0,features:[J],decls:88,vars:52,consts:[[1,"row","g-0"],[1,"col-9","ps-5","pe-3"],[1,"container","container_form","my-3","rounded"],[1,"row","row-cols-1","row-cols-md-2",3,"ngSubmit","formGroup"],[1,"col","mt-3"],[1,"form-label"],["type","text","formControlName","propertyUnitName","placeholder","Enter Property Unit Name",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","propertyUnitLegalName","placeholder","Enter Property Unit Legal Name",1,"form-control",3,"ngClass"],["id","options","formControlName","propertyUnitType",1,"form-control",2,"appearance","auto"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","description","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"col-md-12","mt-4"],[1,"form-label","fw-semibold"],["formGroupName","propertyAddress",1,"col","mt-3"],["type","text","formControlName","addressLine1","placeholder","Enter Address Line 1",1,"form-control",3,"ngClass"],["type","text","formControlName","addressLine2","placeholder","Enter Address Line 2",1,"form-control"],["type","text","formControlName","city","placeholder","Enter City",1,"form-control",3,"ngClass"],["type","text","formControlName","state","placeholder","Enter State",1,"form-control",3,"ngClass"],["type","text","formControlName","country","placeholder","Enter Country",1,"form-control",3,"ngClass"],["type","text","formControlName","zipCode","placeholder","Enter Zip Code",1,"form-control",3,"ngClass"],[4,"ngIf"],["formGroupName","managerDetails",1,"col","mt-3"],["type","text","formControlName","firstName","placeholder","Enter  First Name",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName","placeholder","Enter  Last Name",1,"form-control",3,"ngClass"],["type","text","formControlName","phone","placeholder","Enter  Phone","maxlength","10",1,"form-control",3,"ngClass"],["type","text","formControlName","email","placeholder","Enter  Email",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mb-3"],["type","button","class","btn btn-primary mb-3 ms-2",3,"click",4,"ngIf"],[1,"col-3","px-3"],[1,"text-danger"],[3,"value"],["type","button",1,"btn","btn-primary","mb-3","ms-2",3,"click"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),v("ngSubmit",function(){return e.onSubmit()}),n(4,"div",4)(5,"label",5),o(6,"Property Unit Name*"),t(),y(7,"input",6),d(8,je,2,0,"small",7),t(),n(9,"div",4)(10,"label",5),o(11,"Property Unit Legal Name*"),t(),y(12,"input",8),d(13,Ge,2,0,"small",7),t(),n(14,"div",4)(15,"label",5),o(16,"Property Unit Type"),t(),n(17,"div")(18,"select",9),d(19,Ze,2,2,"option",10),t()(),d(20,Qe,2,0,"small",7),t(),n(21,"div",4)(22,"label",5),o(23,"Description"),t(),y(24,"input",11),d(25,$e,2,0,"small",7),t(),n(26,"div",12)(27,"label",13),o(28,"Property Address"),t()(),n(29,"div",14)(30,"label",5),o(31,"Address Line 1*"),t(),y(32,"input",15),d(33,Be,2,0,"small",7),t(),n(34,"div",14)(35,"label",5),o(36,"Address Line 2"),t(),y(37,"input",16),t(),n(38,"div",14)(39,"label",5),o(40,"City*"),t(),y(41,"input",17),d(42,He,2,0,"small",7),t(),n(43,"div",14)(44,"label",5),o(45,"State*"),t(),y(46,"input",18),d(47,Ye,2,0,"small",7),t(),n(48,"div",14)(49,"label",5),o(50,"Country*"),t(),y(51,"input",19),d(52,Je,2,0,"small",7),t(),n(53,"div",14)(54,"label",5),o(55,"Zip Code*"),t(),y(56,"input",20),d(57,Xe,3,2,"div",21),t(),n(58,"div",12)(59,"label",13),o(60,"Manager Details"),t()(),n(61,"div",22)(62,"label",5),o(63," First Name*"),t(),y(64,"input",23),d(65,et,2,0,"small",7),t(),n(66,"div",22)(67,"label",5),o(68," Last Name*"),t(),y(69,"input",24),d(70,tt,2,0,"small",7),t(),n(71,"div",22)(72,"label",5),o(73," Phone*"),t(),y(74,"input",25),d(75,rt,2,0,"small",7),t(),n(76,"div",22)(77,"label",5),o(78," Email*"),t(),y(79,"input",26),d(80,it,2,0,"small",7),t(),n(81,"div",12)(82,"div",27)(83,"button",28),o(84,"Submit"),t(),d(85,nt,2,0,"button",29),t()()()()(),n(86,"div",30),y(87,"app-property-sidebar"),t()()),i&2){let s,_,U,E,S,A,N,b,P,D,T,I,w,L,x,q,z,O,R,V,M,k,j,G,Z;p(3),m("formGroup",e.propertyUnitForm),p(4),m("ngClass",g(28,f,(((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.dirty)||((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.touched))&&((s=e.propertyUnitForm.get("propertyUnitName"))==null?null:s.invalid))),p(),m("ngIf",(((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.dirty)||((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.touched))&&((_=e.propertyUnitForm.get("propertyUnitName"))==null?null:_.invalid)),p(4),m("ngClass",g(30,f,(((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.dirty)||((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.touched))&&((U=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:U.invalid))),p(),m("ngIf",(((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.dirty)||((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.touched))&&((E=e.propertyUnitForm.get("propertyUnitLegalName"))==null?null:E.invalid)),p(6),m("ngForOf",e.PropertyTypes),p(),m("ngIf",(((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.dirty)||((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.touched))&&((S=e.propertyUnitForm.get("propertyUnitType"))==null?null:S.invalid)),p(4),m("ngClass",g(32,f,(((A=e.propertyUnitForm.get("description"))==null?null:A.dirty)||((A=e.propertyUnitForm.get("description"))==null?null:A.touched))&&((A=e.propertyUnitForm.get("description"))==null?null:A.invalid))),p(),m("ngIf",(((N=e.propertyUnitForm.get("description"))==null?null:N.dirty)||((N=e.propertyUnitForm.get("description"))==null?null:N.touched))&&((N=e.propertyUnitForm.get("description"))==null?null:N.invalid)),p(7),m("ngClass",g(34,f,(((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.dirty)||((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.touched))&&((b=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:b.invalid))),p(),m("ngIf",(((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.dirty)||((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.touched))&&((P=e.propertyUnitForm.get("propertyAddress.addressLine1"))==null?null:P.invalid)),p(8),m("ngClass",g(36,f,(((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.dirty)||((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.touched))&&((D=e.propertyUnitForm.get("propertyAddress.city"))==null?null:D.invalid))),p(),m("ngIf",(((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.dirty)||((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.touched))&&((T=e.propertyUnitForm.get("propertyAddress.city"))==null?null:T.invalid)),p(4),m("ngClass",g(38,f,(((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.dirty)||((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.touched))&&((I=e.propertyUnitForm.get("propertyAddress.state"))==null?null:I.invalid))),p(),m("ngIf",(((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.dirty)||((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.touched))&&((w=e.propertyUnitForm.get("propertyAddress.state"))==null?null:w.invalid)),p(4),m("ngClass",g(40,f,(((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.dirty)||((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.touched))&&((L=e.propertyUnitForm.get("propertyAddress.country"))==null?null:L.invalid))),p(),m("ngIf",(((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.dirty)||((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.touched))&&((x=e.propertyUnitForm.get("propertyAddress.country"))==null?null:x.invalid)),p(4),m("ngClass",g(42,f,(((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.dirty)||((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.touched))&&((q=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:q.invalid))),p(),m("ngIf",((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.invalid)&&(((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.dirty)||((z=e.propertyUnitForm.get("propertyAddress.zipCode"))==null?null:z.touched))),p(7),m("ngClass",g(44,f,(((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.dirty)||((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.touched))&&((O=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:O.invalid))),p(),m("ngIf",(((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.dirty)||((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.touched))&&((R=e.propertyUnitForm.get("managerDetails.firstName"))==null?null:R.invalid)),p(4),m("ngClass",g(46,f,(((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.dirty)||((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.touched))&&((V=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:V.invalid))),p(),m("ngIf",(((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.dirty)||((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.touched))&&((M=e.propertyUnitForm.get("managerDetails.lastName"))==null?null:M.invalid)),p(4),m("ngClass",g(48,f,(((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.dirty)||((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.touched))&&((k=e.propertyUnitForm.get("managerDetails.phone"))==null?null:k.invalid))),p(),m("ngIf",(((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.dirty)||((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.touched))&&((j=e.propertyUnitForm.get("managerDetails.phone"))==null?null:j.invalid)),p(4),m("ngClass",g(50,f,(((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.dirty)||((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.touched))&&((G=e.propertyUnitForm.get("managerDetails.email"))==null?null:G.invalid))),p(),m("ngIf",(((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.dirty)||((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.touched))&&((Z=e.propertyUnitForm.get("managerDetails.email"))==null?null:Z.invalid)),p(5),m("ngIf",e.propertyUnitId!="ADD")}},dependencies:[ue,me,de,se,ge,Ie,Ce,be,Pe,ve,Ne,he,Fe,De,we,Ee,Ae,Se,K,qe],styles:[".form-label[_ngcontent-%COMP%]{margin-bottom:0}.form-control.is-invalid[_ngcontent-%COMP%]{background-image:none;padding-right:.375rem .75rem}.container_form[_ngcontent-%COMP%]{background:#00000023}"]});let r=a;return r})();export{Nt as AddUpdatePropertyComponent};
